max v2;#N vpatcher 241 48 853 661;#P origin 0 -77;#P window setfont "Sans Serif" 9.;#P window linecount 2;#N vpatcher 527 96 964 498;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P comment 114 122 194 196617 smoothing values a little;#P newex 58 119 49 196617 slide 3. 3.;#P comment 18 28 37 196617 turn on;#P toggle 58 27 15 0;#P newex 58 48 27 196617 gate;#P comment 154 243 94 196617 selecting only peaks;#P comment 155 217 125 196617 removing multiple instances;#P comment 143 188 266 196617 check whether the value is above or below a certain threshold;#P comment 114 151 253 196617 changing the range so that we can use regular Max objects;#P newex 58 147 28 196617 * 10.;#P newex 110 185 27 196617 < -2;#P newex 58 184 27 196617 > 2;#P newex 58 71 100 196617 jcom.oscroute /x /y /z;#P newex 58 94 51 196617 jcom.delta;#P comment 114 96 194 196617 looking only at the differences in movement;#P inlet 75 27 15 0;#P window linecount 1;#P message 110 289 18 196617 80;#P newex 110 214 40 196617 change;#P button 110 261 21 0;#P newex 110 237 28 196617 sel 1;#P newex 58 340 40 196617 noteout;#P message 58 289 18 196617 60;#P newex 58 315 85 196617 makenote 100 200;#P newex 58 216 40 196617 change;#P button 58 263 21 0;#P newex 58 239 28 196617 sel 1;#P connect 22 0 21 0;#P connect 21 0 13 0;#P connect 13 0 12 0;#P connect 12 0 24 0;#P connect 24 0 16 0;#P connect 16 0 14 0;#P connect 14 0 2 0;#P connect 2 0 0 0;#P connect 0 0 1 0;#P connect 1 0 4 0;#P fasten 9 0 3 0 115 309 63 309;#P connect 4 0 3 0;#P connect 3 0 5 0;#P fasten 3 1 5 1 138 337 78 337;#P connect 10 0 21 1;#P fasten 16 0 15 0 63 175 115 175;#P connect 15 0 8 0;#P connect 8 0 6 0;#P connect 6 0 7 0;#P connect 7 0 9 0;#P pop;#P newobj 180 215 60 196617 p play-notes;#P window linecount 1;#N vpatcher 15 55 173 287;#P window setfont "Sans Serif" 9.;#P newex 50 109 21 196617 t 0;#P newex 50 53 35 196617 * 10.;#P newex 50 81 54 196617 split 0. 1.;#P inlet 50 30 15 0;#P outlet 50 150 15 0;#P connect 1 0 3 0;#P connect 3 0 2 0;#P connect 2 0 4 0;#P connect 4 0 0 0;#P fasten 2 1 0 0 99 136 55 136;#P pop;#P newobj 307 375 72 196617 p segmentation;#P user multiSlider 307 400 271 85 0. 10. 1 3961 15 0 0 2 0 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#N vpatcher 15 55 459 355;#P window setfont "Sans Serif" 9.;#P flonum 69 181 35 9 0. 0 1 3 0 0 0 221 221 221 222 222 222 0 0 0;#P comment 126 95 222 196617 adding all values to look for quantity of motion.;#P newex 50 55 118 196617 jcom.oscroute /x /y /z;#P newex 50 103 27 196617 + 0.;#P newex 50 80 27 196617 + 0.;#P comment 107 159 315 196617 taking the absolute value to look for peaks in the quantity of motion.;#P comment 107 206 241 196617 smoothing the values with a simple low-pass filter.;#P newex 50 205 55 196617 slide 3. 3.;#P newex 50 152 37 196617 abs 0.;#P newex 50 129 57 196617 jcom.delta;#P comment 106 131 240 196617 the first derivative returns the quantity of motion.;#P inlet 50 30 15 0;#P outlet 50 232 15 0;#P connect 1 0 10 0;#P connect 10 0 8 0;#P connect 8 0 9 0;#P connect 9 0 3 0;#P connect 3 0 4 0;#P connect 4 0 5 0;#P connect 5 0 0 0;#P connect 10 1 8 1;#P connect 10 2 9 1;#P connect 12 0 5 1;#P connect 12 0 5 2;#P pop;#P newobj 307 261 104 196617 p quantity-of-motion;#P user multiSlider 21 486 271 85 -1. 1. 1 3961 15 0 0 2 0 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P flonum 93 248 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P user multiSlider 307 285 271 85 0. 1. 1 3961 15 0 0 2 0 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#N vpatcher 20 74 331 273;#P window setfont "Sans Serif" 9.;#P newex 155 51 55 196617 slide 3. 3.;#P newex 50 50 55 196617 slide 3. 3.;#P newex 50 102 43 196617 pak 0 0;#P newex 155 74 92 196617 scale -1. 1. 0 127;#P newex 50 74 92 196617 scale -1. 1. 0 127;#P inlet 155 31 15 0;#P inlet 50 30 15 0;#P outlet 50 124 15 0;#P connect 1 0 6 0;#P connect 6 0 3 0;#P connect 3 0 5 0;#P connect 5 0 0 0;#P fasten 4 0 5 1 160 97 88 97;#P connect 2 0 7 0;#P connect 7 0 4 0;#P pop;#P hidden newobj 307 123 73 196617 p pre-process;#P user pictslider 307 146 100 100 4 4 4 4 SliderDefaultKnob.pct 1 SliderDefaultBkgnd.pct 1 2163 0 8323072 127 1. 1.;#P window linecount 2;#P comment 351 28 203 196617 Requires the Phidgets library to be installed (found in /library/externals_3d_party);#P user multiSlider 19 385 271 85 -1. 1. 1 3961 15 0 0 2 0 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P user multiSlider 19 285 271 85 -1. 1. 1 3961 15 0 0 2 0 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P flonum 56 248 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 19 248 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P window linecount 1;#P newex 19 214 122 196617 jcom.oscroute /x /y /z;#P comment 12 34 326 196617 Use the USB accelerometers from Phidgets.com.;#B frgb 255 255 255;#P window setfont "Sans Serif" 18.;#P comment 12 6 313 196626 jmod.phidgets.accelerometer;#B frgb 255 255 255;#P user panel 0 0 339 65;#X brgb 67 65 107;#X frgb 128 11 10;#X border 0;#X rounded 0;#X shadow 0;#X done;#P bpatcher 19 146 255 60 0 0 jmod.phidgets.accelerometer.mxt 0 /accelerometer;#P objectname /accelerometer;#P window setfont "Sans Serif" 9.;#P window linecount 4;#P user com 29 72 294 196617 75;#K set 0 21843 16711 17677 12590 8259 27753 25451 8303 28192 26990 26996 8308 28448 29285 26226 25971 26656 29800 25888 28005 28277 8311 26996 26656 29800 25888 25455 28270 25955 29797 25632 25701 30313 25445 29486 8205 12846 8275 25964 25955 29728 25701 30313 25445 8308 28448 30067 25869 13102 8259 27753 25451 8308 26725 8303 26214 12143 28205 25205 29812 28526 8308 28448 29556 24946 29728 28783 27756 26990 26400 29800 25888 25701 30313 25445;#K end;#P window linecount 1;#P comment 134 248 123 196617 acceleration values in G;#P connect 2 0 6 0;#P connect 6 0 7 0;#P connect 7 0 9 0;#P connect 8 0 10 0;#P connect 15 0 16 0;#P connect 6 1 8 0;#P connect 6 2 15 0;#P fasten 2 0 20 0 24 211 185 211;#P hidden connect 6 0 13 0;#P hidden connect 13 0 12 0;#P fasten 2 0 17 0 24 211 240 211 277 256 312 256;#P connect 17 0 14 0;#P connect 17 0 19 0;#P connect 19 0 18 0;#P hidden connect 6 1 13 1;#P pop;