max v2;
#N vpatcher 99 44 938 759;
#P window setfont "Sans Serif" 9.;
#P newex 96 561 55 196617 switch 2 1;
#P newex 322 481 103 196617 print MENU_PREP_IN;
#P newex 317 502 88 196617 print MENU_PREP;
#P newex 316 528 80 196617 print PATTR_IN;
#P newex 279 366 45 196617 loadbang;
#P comment 278 389 234 196617 this allows the first zero value to make it through;
#P message 209 387 65 196617 -2000000.;
#N vpatcher 10 59 410 359;
#P window setfont "Sans Serif" 9.;
#P newex 165 128 21 196617 t 0;
#B color 3;
#P newex 86 163 76 196617 pack;
#B color 3;
#P newex 86 99 76 196617 unpack;
#B color 3;
#P newex 86 119 64 196617 expr ($f1 * (10./6.)) + 127;
#B color 3;
#P comment 170 152 80 196617 decibels to midi conversion;
#P outlet 148 236 15 0;
#P inlet 144 36 15 0;
#P connect 0 0 4 0;
#P connect 4 0 3 0;
#P lcolor 4;
#P connect 3 0 5 0;
#P lcolor 4;
#P connect 5 0 1 0;
#P connect 4 1 5 1;
#P lcolor 4;
#P connect 6 0 5 1;
#P lcolor 4;
#P connect 4 1 6 0;
#P lcolor 4;
#P pop;
#P newobj 118 479 65 196617 p db_to_midi;
#N vpatcher 10 59 410 359;
#P window setfont "Sans Serif" 9.;
#P newex 61 108 27 196617 + 1;
#P newex 61 129 45 196617 gate 2 1;
#P newex 61 87 43 196617 < -76.;
#P inlet 61 36 15 0;
#P outlet 61 198 15 0;
#P newex 95 156 48 196617 t -120.;
#P newex 61 60 145 196617 expr ((127 - $f1) /10.) * -6.;
#B color 3;
#P connect 3 0 0 0;
#P connect 0 0 4 0;
#P connect 4 0 6 0;
#P connect 6 0 5 0;
#P connect 5 0 2 0;
#P connect 1 0 2 0;
#P connect 5 1 1 0;
#P fasten 0 0 5 1 126 86;
#P pop;
#P newobj 73 66 65 196617 p midi_to_db;
#P newex 501 361 27 196617 int;
#N vpatcher 10 59 489 323;
#P window setfont "Sans Serif" 9.;
#P newex 13 132 31 196617 sel 1;
#P newex 13 112 27 196617 i;
#P newex 30 93 53 196617 dspstate~;
#P newex 13 170 50 196617 tosymbol;
#P message 13 152 429 196617 sr-ratio: RESTART DSP FOR CHANGE TO TAKE EFFECT;
#P newex 13 190 53 196617 jmod.post;
#P newex 13 69 31 196617 sel 1;
#P inlet 13 37 15 0;
#P connect 0 0 1 0;
#P connect 1 0 6 0;
#P connect 6 0 7 0;
#P connect 7 0 3 0;
#P connect 3 0 4 0;
#P connect 4 0 2 0;
#P connect 5 0 6 1;
#P pop;
#P newobj 21 671 139 196617 p NOTIFY_TO_RESTART_DSP;
#P newex 83 453 45 196617 gate 2 1;
#P newex 38 46 45 196617 gate 2 1;
#P newex 687 300 27 196617 int;
#P message 723 274 14 196617 2;
#P message 687 274 14 196617 1;
#P newex 687 253 83 196617 sel none db2midi;
#P newex 118 432 148 196617 pattr $2;
#X prestore 1 0 0;
#P objectname $2;
#P outlet 96 591 15 0;
#P newex 83 351 45 196617 gate 2 1;
#P newex 118 375 55 196617 tap.change;
#P newex 594 274 27 196617 + 1;
#P toggle 594 256 15 0;
#P newex 38 623 27 196617 i;
#P message 543 339 14 196617 1;
#P message 501 339 14 196617 0;
#P newex 21 650 27 196617 gate;
#P newex 38 92 53 196617 t b l f l;
#P newex 501 317 95 196617 sel n/a RestartDSP;
#P message 445 268 14 196617 2;
#P message 408 268 14 196617 1;
#P newex 408 247 84 196617 sel generic menu;
#P newex 133 324 163 196617 gate 3 1;
#P newex 140 540 75 196617 jmod.menuprep;
#P newex 181 264 27 196617 gate;
#P newex 194 224 27 196617 + 1;
#P newex 315 227 478 196617 route ramp_enable type special filter_dupes conversion;
#P toggle 181 200 15 0;
#P newex 118 257 45 196617 gate 2 1;
#P newex 153 284 50 196617 jmod.line;
#P newex 315 177 261 196617 patcherargs $0_ mod_name @ramp_enable 0 @type generic @special n/a @filter_dupes 0 @conversion none;
#P newex 315 113 137 196617 send $1_register;
#P message 315 89 132 196617 $2;
#P newex 315 65 140 196617 receive $1_query;
#P newex 53 177 204 196617 route $2;
#P newex 53 155 202 196617 receive $1_instruction;
#P inlet 73 28 15 0;
#P fasten 37 0 20 0 506 645 26 645;
#P connect 20 0 36 0;
#P fasten 33 0 34 0 692 334 807 334 807 24 43 24;
#P connect 34 0 19 0;
#P connect 38 0 19 0;
#P connect 19 0 23 0;
#P connect 23 0 20 1;
#P connect 1 0 2 0;
#P fasten 22 0 23 1 548 619 60 619;
#P connect 0 0 34 1;
#P connect 34 1 38 0;
#P fasten 25 0 27 0 599 304 88 304;
#P lcolor 3;
#P fasten 33 0 35 0 692 419 88 419;
#P connect 16 0 46 0;
#P connect 17 0 46 0;
#P connect 46 0 28 0;
#P connect 11 0 8 0;
#P connect 8 0 27 1;
#P fasten 19 3 27 1 68 295;
#P fasten 7 0 27 1 127 321 123 342;
#P connect 27 1 26 0;
#P connect 27 0 29 0;
#P connect 26 0 29 0;
#P connect 29 0 35 1;
#P connect 35 1 39 0;
#P connect 35 0 46 1;
#P connect 39 0 46 1;
#P fasten 17 0 14 0 450 318 138 318;
#P fasten 16 0 14 0 413 316 138 316;
#P connect 35 0 13 0;
#P connect 13 0 46 2;
#P connect 2 0 8 1;
#P connect 8 1 7 0;
#P connect 40 0 26 1;
#P connect 19 1 26 1;
#P connect 10 0 9 0;
#P connect 9 0 12 0;
#P connect 12 0 7 1;
#P connect 9 0 11 0;
#P connect 19 2 12 1;
#P connect 42 0 40 0;
#P connect 7 0 14 1;
#P connect 8 0 14 1;
#P connect 3 0 4 0;
#P connect 4 0 5 0;
#P fasten 6 1 10 0 571 218 320 218;
#P connect 10 1 15 0;
#P connect 15 0 16 0;
#P connect 15 1 17 0;
#P connect 10 2 18 0;
#P connect 18 0 21 0;
#P connect 22 0 37 0;
#P connect 21 0 37 0;
#P connect 18 1 22 0;
#P connect 10 3 24 0;
#P connect 24 0 25 0;
#P connect 10 4 30 0;
#P connect 30 0 31 0;
#P connect 32 0 33 0;
#P connect 31 0 33 0;
#P connect 30 1 32 0;
#P pop;
