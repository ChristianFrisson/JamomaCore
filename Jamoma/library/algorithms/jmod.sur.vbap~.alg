max v2;#N vpatcher 22 109 751 532;#P origin 0 66;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 42 76 27 196617 t l l;#P newex 252 93 417 196617 jmod.multi.out~.mxt;#P objectname multiout;#P newex 252 313 417 196617 jmod.multi.in~.mxt;#P objectname multiin;#N vpatcher 80 79 404 414;#P window setfont "Sans Serif" 9.;#N vpatcher 50 119 985 826;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 180 138 51 196617 zl join;#P newex 180 114 27 196617 - 1;#P newex 180 90 51 196617 zl slice 1;#P window linecount 0;#P newex 50 138 51 196617 zl join;#P newex 50 114 27 196617 - 1;#P newex 50 90 51 196617 zl slice 1;#P newex 10 124 20 196617 t b;#P newex 539 210 27 196617 - 1;#P message 539 234 55 196617 getcell \$1;#P newex 509 183 40 196617 uzi 16;#P window linecount 1;#P newex 509 147 96 196617 t b l;#P inlet 509 30 15 0;#P window linecount 0;#P comment 49 354 100 196617 - spread;#P comment 49 342 100 196617 - dist;#P comment 49 330 100 196617 - ele;#P comment 49 306 100 196617 4 planes:;#P comment 49 318 100 196617 - azi;#P newex 234 400 29 196617 gate;#P newex 253 331 27 196617 t l i;#P newex 293 363 27 196617 <;#P newex 253 309 53 196617 route cell;#P newex 50 56 402 196617 jmod.oscroute /aed /spread /voices;#P window linecount 2;#P message 180 167 126 196617 setcell \$1 plane 3 val \$2 \, getcell \$1;#P window linecount 4;#P message 50 167 126 196617 setcell \$1 plane 0 val \$2 \, setcell \$1 plane 1 val \$3 \, setcell \$1 plane 2 val \$4 \, getcell \$1;#P window linecount 1;#P newex 50 283 213 196617 jit.matrix $0_source_positions 4 float32 32;#P newex 282 529 27 196617 t b l;#P newex 234 592 38 196617 zl join;#P newex 234 568 27 196617 i;#P newex 234 466 27 196617 t b i;#P newex 282 501 53 196617 vbap;#P newex 234 426 105 196617 unpack 0 s 0. 0. 0. 0.;#P inlet 50 30 15 0;#P outlet 234 614 15 0;#P window linecount 0;#P comment 616 206 155 196617 If speaker setup is updated \, source positions are refreshed;#P connect 12 0 27 0;#P connect 2 0 12 0;#P connect 12 0 28 0;#P connect 28 0 29 0;#P connect 29 0 30 0;#P connect 30 0 10 0;#P connect 27 0 9 0;#P fasten 11 0 9 0 185 222 55 222;#P connect 10 0 9 0;#P fasten 25 0 9 0 544 266 55 266;#P lcolor 1;#P connect 28 1 30 1;#P connect 12 1 31 0;#P connect 31 0 32 0;#P connect 32 0 33 0;#P connect 33 0 11 0;#P connect 31 1 33 1;#P connect 14 0 16 0;#P connect 16 0 3 0;#P connect 3 0 5 0;#P connect 8 0 6 0;#P connect 6 0 7 0;#P connect 7 0 1 0;#P connect 5 1 6 1;#P connect 9 1 13 0;#P connect 13 0 15 0;#P connect 15 0 16 1;#P connect 8 1 7 1;#P connect 5 0 4 0;#P fasten 23 1 4 0 600 495 287 495;#P connect 4 0 8 0;#P connect 15 1 14 0;#P connect 3 2 4 1;#P connect 12 2 14 1;#P connect 3 3 4 2;#P connect 3 5 4 3;#P connect 22 0 23 0;#P connect 23 0 24 0;#P connect 24 2 26 0;#P connect 26 0 25 0;#P pop;#P newobj 36 168 89 196617 p source_position;#N vpatcher 20 74 800 727;#P window setfont "Sans Serif" 9.;#P window linecount 0;#N vpatcher 374 271 974 671;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 49 165 67 196617 zl group 256;#P newex 66 139 60 196617 jmod.round;#P newex 66 118 25 196617 iter;#P newex 49 92 27 196617 t b l;#P inlet 49 72 15 0;#P outlet 49 187 15 0;#P window linecount 0;#P comment 145 130 157 196617 Angles have to be rounded to int.;#P comment 145 151 362 196617 define_loudspeakers seems to treat float angles as radians instead of degrees.;#P connect 3 0 4 0;#P connect 4 0 7 0;#P connect 6 0 7 0;#P connect 7 0 2 0;#P connect 4 1 5 0;#P connect 5 0 6 0;#P pop;#P newobj 226 453 64 196617 p list_round;#P window linecount 1;#P newex 60 56 141 196617 r $0_refresh_speaker-setup;#P newex 191 504 27 196617 t b l;#P newex 191 449 27 196617 i;#P newex 191 417 45 196617 t b l;#P newex 191 477 45 196617 zl join;#P newex 208 531 106 196617 prepend ls-directions;#P newex 191 392 51 196617 zl slice 0;#P newex 191 349 36 196617 zl reg;#P newex 221 317 67 196617 zl group 256;#P newex 343 122 27 196617 t b i;#P newex 60 192 29 196617 qlim;#P newex 60 134 56 196617 t b b dump;#P newex 221 269 71 196617 zl slice 0;#N coll ;#P newobj 221 179 53 196617 coll;#P newex 282 159 27 196617 - 1;#P newex 282 111 44 196617 clip 2 3;#P newex 343 214 27 196617 * 2;#P newex 221 56 194 196617 jmod.oscroute /aed /dimensions /voices;#P newex 208 566 228 196617 define_loudspeakers 3 45 0 -45 0 135 0 -135 0;#P inlet 221 36 15 0;#P outlet 208 588 15 0;#P window linecount 5;#P comment 496 62 117 196617 Speaker setup is always refreshed when audio is started \, in case numer of voices in or out has been changed.;#P connect 4 2 10 0;#P connect 4 1 10 0;#P connect 4 0 10 0;#P connect 21 0 10 0;#P connect 10 0 11 0;#P connect 11 0 14 0;#P connect 14 0 15 0;#P connect 15 0 18 0;#P connect 18 0 19 0;#P connect 19 0 17 0;#P connect 17 0 20 0;#P fasten 6 0 19 1 287 146 325 146 325 442 213 442;#P connect 20 1 16 0;#P fasten 20 0 3 0 196 557 213 557;#P connect 16 0 3 0;#P connect 3 0 1 0;#P connect 13 0 14 1;#P connect 2 0 4 0;#P connect 10 2 8 0;#P connect 4 0 8 0;#P connect 8 0 9 0;#P connect 9 0 13 0;#P connect 10 1 13 0;#P connect 18 1 22 0;#P connect 22 0 17 1;#P fasten 5 0 15 1 348 385 237 385;#P connect 4 1 6 0;#P connect 6 0 7 0;#P connect 7 0 9 1;#P connect 4 2 12 0;#P connect 12 0 5 0;#P connect 7 0 5 0;#P connect 12 1 5 1;#P pop;#P newobj 135 135 101 196617 p loudspeaker_setup;#P newex 36 91 209 196617 jmod.oscroute /source /destination;#P inlet 36 56 15 0;#P outlet 36 242 15 0;#P connect 1 0 2 0;#P connect 2 0 4 0;#P connect 4 0 0 0;#P connect 3 0 4 1;#P connect 2 1 3 0;#P pop;#P newobj 179 129 61 196617 p messages;#P objectname messages;#P inlet 42 48 15 0;#N vpatcher 43 171 908 636;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 30 201 141 196617 s $0_refresh_speaker-setup;#P window linecount 0;#P message 593 361 101 196617 script delete matrix;#P newex 246 79 241 196617 jmod.oscroute /source/voices /destination/voices;#P window linecount 2;#P comment 279 169 134 196617 Changes can not take place while audio is running;#P window linecount 1;#P comment 439 238 396 196617 Only apply script if either /source/voices or /destination/voices has changed;#P newex 227 256 58 196617 unpack 0 0;#P newex 227 232 175 196617 if $i1 != $i3 || $i2 !=$i4 then $i1 $i2;#P window linecount 0;#P newex 361 127 27 196617 t b i;#N vpatcher 44 74 430 371;#P inlet 120 30 15 0;#P window setfont "Sans Serif" 9.;#P newex 50 75 27 196617 i;#P newex 80 193 216 196617 sprintf script connect matrix %ld multiin %ld;#P newex 80 153 27 196617 - 1;#P newex 50 115 40 196617 uzi;#P inlet 50 30 15 0;#P outlet 80 234 15 0;#P connect 1 0 5 0;#P connect 5 0 2 0;#P connect 6 0 5 1;#P connect 2 2 3 0;#P connect 3 0 4 0;#P connect 4 0 0 0;#P fasten 3 0 4 1 85 181 291 181;#P pop;#P newobj 227 361 117 196617 p connect_from_matrix;#N vpatcher 44 74 644 474;#P window setfont "Sans Serif" 9.;#P message 65 211 172 196617 script connect messages 0 matrix 0;#P newex 248 175 27 196617 - 1;#P newex 248 207 222 196617 sprintf script connect multiout %ld matrix %ld;#P newex 50 141 40 196617 uzi 4;#P inlet 50 30 15 0;#P outlet 65 270 15 0;#P connect 1 0 2 0;#P connect 2 1 5 0;#P connect 3 0 0 0;#P connect 5 0 0 0;#P fasten 2 2 4 0 85 165 253 165;#P connect 4 0 3 0;#P fasten 4 0 3 1 253 199 465 199;#P pop;#P newobj 349 361 104 196617 p connect_to_matrix;#N vpatcher 44 74 529 259;#P inlet 392 23 15 0;#P window setfont "Sans Serif" 9.;#P newex 50 59 352 196617 sprintf script new matrix newex 252 262 209 196617 matrix~ %ld %ld 1.;#P inlet 50 23 15 0;#P outlet 50 103 15 0;#P connect 1 0 2 0;#P connect 2 0 0 0;#P connect 3 0 2 1;#P pop;#P newobj 471 361 73 196617 p new_matrix;#P newex 30 41 48 196617 loadbang;#P newex 88 102 31 196617 == 0;#P outlet 227 406 15 0;#P newex 227 327 377 196617 t b i i b;#P inlet 246 44 15 0;#P newex 246 166 27 196617 i 1;#P newex 227 187 29 196617 gate;#P newex 30 102 41 196617 sel 1 0;#P newex 30 69 54 196617 dspstate~;#P comment 268 44 100 196617 voices;#P connect 9 0 1 0;#P connect 1 0 2 0;#P connect 2 0 20 0;#P fasten 1 0 8 0 35 92 93 92;#P connect 8 0 3 0;#P connect 3 0 14 0;#P connect 14 0 15 0;#P connect 15 0 6 0;#P connect 6 0 12 0;#P fasten 19 0 7 0 598 392 232 392;#P connect 12 0 7 0;#P fasten 11 0 7 0 354 392 232 392;#P fasten 10 0 7 0 476 392 232 392;#P connect 5 0 18 0;#P connect 13 0 4 0;#P connect 18 0 4 0;#P fasten 2 1 4 0 50 131 251 131;#P connect 4 0 3 1;#P connect 13 1 14 1;#P fasten 15 1 12 1 280 317 339 317;#P fasten 15 0 14 2 232 283 424 283 424 222 342 222;#P connect 6 1 11 0;#P connect 18 1 13 0;#P fasten 15 1 14 3 280 280 421 280 421 225 397 225;#P connect 6 2 10 0;#P fasten 15 1 10 1 280 317 539 317;#P connect 6 3 19 0;#P pop;#P newobj 59 129 78 196617 p scripting;#N thispatcher;#Q end;#P newobj 59 239 61 196617 thispatcher;#P outlet 252 346 15 0;#P objectname out[1];#N comlet W - omni;#P inlet 252 47 15 0;#P objectname in[1];#P newex 252 262 209 196617 matrix~ 1 0 1.;#P objectname matrix;#P connect 5 0 9 0;#P connect 9 1 4 0;#P connect 4 0 3 0;#P fasten 9 0 6 0 47 107 184 107;#P connect 1 0 8 0;#P connect 6 0 0 0;#P connect 8 0 0 0;#P connect 7 0 2 0;#P pop;