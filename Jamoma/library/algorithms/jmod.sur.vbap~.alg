max v2;#N vpatcher 22 109 751 532;#P origin 0 66;#P window setfont "Sans Serif" 9.;#P number 166 37 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 70 39 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 168 65 115 196617 /destination/voices \$1;#P message 67 65 96 196617 /source/voices \$1;#P newex 42 76 27 196617 t l l;#P newex 252 93 417 196617 jmod.multi.out~.mxt;#P objectname multiout;#P newex 252 313 417 196617 jmod.multi.in~.mxt;#P objectname multiin;#N vpatcher 80 78 404 413;#P window setfont "Sans Serif" 9.;#N vpatcher 50 119 636 654;#P inlet 509 30 15 0;#P window setfont "Sans Serif" 9.;#P comment 49 212 100 196617 - spread;#P comment 49 200 100 196617 - dist;#P comment 49 188 100 196617 - ele;#P comment 49 164 100 196617 4 planes:;#P comment 49 176 100 196617 - azi;#P newex 234 258 29 196617 gate;#P newex 253 189 27 196617 t l i;#P newex 293 221 27 196617 <;#P newex 253 167 53 196617 route cell;#P newex 50 50 402 196617 jmod.oscroute /aed /spread /voices;#P window linecount 2;#P message 180 81 126 196617 setcell \$1 plane 3 val \$2 \, getcell \$1;#P window linecount 4;#P message 50 81 126 196617 setcell \$1 plane 0 val \$2 \, setcell \$1 plane 1 val \$3 \, setcell \$1 plane 2 val \$4 \, getcell \$1;#P window linecount 1;#P newex 50 141 213 196617 jit.matrix $0_source_positions 4 float32 32;#P newex 282 387 27 196617 t b l;#P newex 234 450 38 196617 zl join;#P newex 234 426 27 196617 i;#P newex 234 324 27 196617 t b i;#P newex 282 359 53 196617 vbap;#P newex 234 284 105 196617 unpack 0 s 0. 0. 0. 0.;#P inlet 50 30 15 0;#P outlet 234 472 15 0;#P connect 1 0 11 0;#P connect 11 0 9 0;#P fasten 10 0 8 0 185 136 55 136;#P connect 9 0 8 0;#P connect 11 1 10 0;#P connect 13 0 15 0;#P connect 15 0 2 0;#P connect 2 0 4 0;#P connect 7 0 5 0;#P connect 5 0 6 0;#P connect 6 0 0 0;#P connect 4 1 5 1;#P connect 8 1 12 0;#P connect 12 0 14 0;#P connect 14 0 15 1;#P connect 7 1 6 1;#P fasten 21 0 3 0 514 349 287 349;#P connect 4 0 3 0;#P connect 3 0 7 0;#P connect 14 1 13 0;#P connect 2 2 3 1;#P connect 11 2 13 1;#P connect 2 3 3 2;#P connect 2 5 3 3;#P pop;#P newobj 36 168 89 196617 p source_position;#N vpatcher 20 74 800 727;#P window setfont "Sans Serif" 9.;#P window linecount 6;#P comment 568 61 161 196617 If /order or /voices has caused ambiencode~ to be recreated \, all values have to be resent when audio start to recreate current state. The same holds true if the center_radius is changed.;#P window linecount 1;#P newex 509 122 45 196617 t b dump;#P newex 509 89 28 196617 sel 1;#P newex 509 59 53 196617 dspstate~;#P newex 142 498 27 196617 t b l;#P newex 142 443 27 196617 i;#P newex 142 411 45 196617 t b l;#P newex 142 471 45 196617 zl join;#P newex 159 525 106 196617 prepend ls-directions;#P newex 142 386 51 196617 zl slice 0;#P newex 142 343 36 196617 zl reg;#P newex 172 311 67 196617 zl group 256;#P newex 294 116 27 196617 t b i;#P newex 50 186 29 196617 qlim;#P newex 50 128 56 196617 t b b dump;#P newex 172 263 71 196617 zl slice 0;#N coll ;#P newobj 172 173 53 196617 coll;#P newex 233 153 27 196617 - 1;#P newex 233 105 44 196617 clip 2 3;#P newex 294 208 27 196617 * 2;#P newex 172 50 194 196617 jmod.oscroute /aed /dimensions /voices;#P newex 159 560 228 196617 define_loudspeakers 3 45 0 -45 0 135 0 -135 0;#P inlet 172 30 15 0;#P outlet 159 582 15 0;#P connect 3 2 9 0;#P connect 3 1 9 0;#P connect 3 0 9 0;#P connect 9 0 10 0;#P connect 10 0 13 0;#P connect 13 0 14 0;#P connect 14 0 17 0;#P connect 17 0 18 0;#P connect 18 0 16 0;#P connect 16 0 19 0;#P fasten 5 0 18 1 238 140 276 140 276 436 164 436;#P connect 19 1 15 0;#P fasten 19 0 2 0 147 551 164 551;#P connect 15 0 2 0;#P connect 2 0 0 0;#P connect 12 0 13 1;#P connect 1 0 3 0;#P connect 3 0 7 0;#P connect 9 2 7 0;#P connect 7 0 8 0;#P connect 8 0 12 0;#P connect 9 1 12 0;#P connect 17 1 16 1;#P fasten 4 0 14 1 299 379 188 379;#P connect 3 1 5 0;#P connect 5 0 6 0;#P connect 6 0 8 1;#P connect 3 2 11 0;#P connect 6 0 4 0;#P connect 11 0 4 0;#P connect 11 1 4 1;#P connect 20 0 21 0;#P connect 21 0 22 0;#P pop;#P newobj 135 135 101 196617 p loudspeaker_setup;#P newex 36 91 209 196617 jmod.oscroute /source /destination;#P inlet 36 56 15 0;#P outlet 36 242 15 0;#P connect 1 0 2 0;#P connect 2 0 4 0;#P connect 4 0 0 0;#P connect 3 0 4 1;#P connect 2 1 3 0;#P pop;#P newobj 179 122 61 196617 p messages;#P objectname messages;#P inlet 42 48 15 0;#N vpatcher 23 175 990 669;#P window setfont "Sans Serif" 9.;#P message 513 361 101 196617 script delete matrix;#P newex 166 79 241 196617 jmod.oscroute /source/voices /destination/voices;#P window linecount 2;#P comment 199 169 134 196617 Changes can not take place while audio is running;#P window linecount 1;#P comment 359 238 396 196617 Only apply script if either /source/voices or /destination/voices has changed;#P newex 147 256 58 196617 unpack 0 0;#P newex 147 232 175 196617 if $i1 != $i3 || $i2 !=$i4 then $i1 $i2;#P window linecount 0;#P newex 281 127 27 196617 t b i;#N vpatcher 44 74 430 371;#P inlet 120 30 15 0;#P window setfont "Sans Serif" 9.;#P newex 50 75 27 196617 i;#P newex 80 193 216 196617 sprintf script connect matrix %ld multiin %ld;#P newex 80 153 27 196617 - 1;#P newex 50 115 40 196617 uzi;#P inlet 50 30 15 0;#P outlet 80 234 15 0;#P connect 1 0 5 0;#P connect 5 0 2 0;#P connect 6 0 5 1;#P connect 2 2 3 0;#P connect 3 0 4 0;#P connect 4 0 0 0;#P fasten 3 0 4 1 85 181 291 181;#P pop;#P newobj 147 361 117 196617 p connect_from_matrix;#N vpatcher 44 74 644 474;#P window setfont "Sans Serif" 9.;#P message 65 211 172 196617 script connect messages 0 matrix 0;#P newex 248 175 27 196617 - 1;#P newex 248 207 222 196617 sprintf script connect multiout %ld matrix %ld;#P newex 50 141 40 196617 uzi 4;#P inlet 50 30 15 0;#P outlet 65 270 15 0;#P connect 1 0 2 0;#P connect 2 1 5 0;#P connect 3 0 0 0;#P connect 5 0 0 0;#P fasten 2 2 4 0 85 165 253 165;#P connect 4 0 3 0;#P fasten 4 0 3 1 253 199 465 199;#P pop;#P newobj 269 361 104 196617 p connect_to_matrix;#N vpatcher 44 74 529 259;#P inlet 392 23 15 0;#P window setfont "Sans Serif" 9.;#P newex 50 59 352 196617 sprintf script new matrix newex 252 262 209 196617 matrix~ %ld %ld 1.;#P inlet 50 23 15 0;#P outlet 50 103 15 0;#P connect 1 0 2 0;#P connect 2 0 0 0;#P connect 3 0 2 1;#P pop;#P newobj 391 361 73 196617 p new_matrix;#P newex 30 41 48 196617 loadbang;#P newex 88 102 31 196617 == 0;#P outlet 147 406 15 0;#P newex 147 327 377 196617 t b i i b;#P inlet 166 44 15 0;#P newex 166 166 27 196617 i 1;#P newex 147 187 29 196617 gate;#P newex 30 102 32 196617 sel 0;#P newex 30 69 54 196617 dspstate~;#P comment 188 44 100 196617 voices;#P connect 9 0 1 0;#P connect 1 0 2 0;#P fasten 1 0 8 0 35 92 93 92;#P connect 8 0 3 0;#P connect 3 0 14 0;#P connect 14 0 15 0;#P connect 15 0 6 0;#P connect 6 0 12 0;#P fasten 19 0 7 0 518 392 152 392;#P connect 12 0 7 0;#P fasten 11 0 7 0 274 392 152 392;#P fasten 10 0 7 0 396 392 152 392;#P connect 5 0 18 0;#P connect 13 0 4 0;#P fasten 2 0 4 0 35 131 171 131;#P connect 18 0 4 0;#P connect 4 0 3 1;#P connect 13 1 14 1;#P fasten 15 1 12 1 200 317 259 317;#P fasten 15 0 14 2 152 283 344 283 344 222 262 222;#P connect 6 1 11 0;#P connect 18 1 13 0;#P fasten 15 1 14 3 200 280 341 280 341 225 317 225;#P connect 6 2 10 0;#P fasten 15 1 10 1 200 317 459 317;#P connect 6 3 19 0;#P pop;#P newobj 59 129 78 196617 p scripting;#N thispatcher;#Q end;#P newobj 59 239 61 196617 thispatcher;#P outlet 252 346 15 0;#P objectname out[1];#N comlet W - omni;#P inlet 252 47 15 0;#P objectname in[1];#P newex 252 262 209 196617 matrix~ 16 16 1.;#P objectname matrix;#P connect 11 0 9 0;#P connect 10 0 9 0;#P connect 5 0 9 0;#P connect 9 1 4 0;#P connect 4 0 3 0;#P connect 12 0 10 0;#P connect 13 0 11 0;#P fasten 9 0 6 0 47 107 184 107;#P connect 1 0 8 0;#P connect 6 0 0 0;#P connect 8 0 0 0;#P connect 0 0 7 0;#P connect 7 0 2 0;#P connect 8 1 0 1;#P connect 0 1 7 1;#P connect 8 2 0 2;#P connect 0 2 7 2;#P connect 8 3 0 3;#P connect 0 3 7 3;#P connect 8 4 0 4;#P connect 0 4 7 4;#P connect 8 5 0 5;#P connect 0 5 7 5;#P connect 8 6 0 6;#P connect 0 6 7 6;#P connect 8 7 0 7;#P connect 0 7 7 7;#P connect 8 8 0 8;#P connect 0 8 7 8;#P connect 8 9 0 9;#P connect 0 9 7 9;#P connect 8 10 0 10;#P connect 0 10 7 10;#P connect 8 11 0 11;#P connect 0 11 7 11;#P connect 8 12 0 12;#P connect 0 12 7 12;#P connect 8 13 0 13;#P connect 0 13 7 13;#P connect 8 14 0 14;#P connect 0 14 7 14;#P connect 8 15 0 15;#P connect 0 15 7 15;#P pop;