max v2;#N vpatcher 108 44 947 812;#P origin -31 11;#P window setfont "Sans Serif" 9.;#P window linecount 1;#N vpatcher 168 44 1621 938;#P origin -174 55;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 1268 71 58 196617 arj.smooth;#P newex 207 63 32 196617 print;#P message 358 21 65 196617 getmoviedim;#P number 284 1 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 245 1 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 206 22 89 196617 pak dim 320 240;#P message 302 22 38 196617 getdim;#P user jit.pwindow 1076 399 276 376 0 1 0 0 1 0;#P newex 1077 373 69 196617 mgt.autocrop;#B color 5;#P message 1159 33 33 196617 reset;#P user jit.pwindow 775 411 276 376 0 1 0 0 1 0;#P newex 776 383 70 196617 jit.submatrix;#B color 5;#P bpatcher 1 93 255 60 0 0 jmod.brcosa%.mxt 0 /brcosa%;#P objectname jmod.brcosa%.mxt;#P user jit.pwindow 8 321 322 242 0 1 0 0 1 0;#P message 376 271 165 196617 srcdimend \$1 \$2 \, dstdimend \$1 \$2;#P message 353 245 182 196617 srcdimstart \$1 \$2 \, dstdimstart \$1 \$2;#P user jit.fpsgui 135 183 60 196617 0;#P newex 288 182 50 196617 t l l clear;#P user jit.pwindow 352 319 322 242 0 1 0 0 1 0;#P newex 353 291 184 196617 jit.matrix @usesrcdim 1 @usedstdim 1;#P newex 308 208 146 196617 jit.findbounds @min 1 @max 1;#B color 5;#P message 159 31 28 196617 read;#P flonum 128 10 35 9 0.5 0 1 3 0 0 0 221 221 221 222 222 222 0 0 0;#P toggle 94 10 15 0;#P newex 94 30 44 196617 metro 2;#P newex 94 62 103 196617 jit.qt.movie 320 240;#P number 1002 154 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 941 154 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 876 154 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 813 154 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 970 277 42 196617 arj.diff;#P newex 909 277 42 196617 arj.diff;#P button 1159 61 15 0;#P message 1117 104 33 196617 1000;#P message 1159 104 14 196617 0;#P newex 876 237 27 196617 / 1.;#P newex 876 127 40 196617 trough;#P newex 813 237 27 196617 / 1.;#P newex 813 127 40 196617 trough;#P newex 1002 237 27 196617 / 1.;#P newex 1002 127 40 196617 peak;#P newex 941 237 27 196617 / 1.;#P newex 941 127 40 196617 peak;#P comment 950 106 50 196617 boundmax;#P comment 836 106 50 196617 boundmin;#P newex 977 50 35 196617 sel -1;#P newex 941 50 35 196617 sel -1;#P newex 851 50 35 196617 sel -1;#P newex 815 50 35 196617 sel -1;#P newex 941 28 46 196617 unpack;#N vpatcher 20 74 620 474;#P outlet 98 100 15 0;#P inlet 95 57 15 0;#P connect 0 0 1 0;#P pop;#P newobj 1002 80 37 196617 p thru;#N vpatcher 20 74 620 474;#P outlet 98 100 15 0;#P inlet 95 57 15 0;#P connect 0 0 1 0;#P pop;#P newobj 941 80 37 196617 p thru;#N vpatcher 20 74 620 474;#P outlet 98 100 15 0;#P inlet 95 57 15 0;#P connect 0 0 1 0;#P pop;#P newobj 876 80 37 196617 p thru;#N vpatcher 20 74 620 474;#P outlet 98 100 15 0;#P inlet 95 57 15 0;#P connect 0 0 1 0;#P pop;#P newobj 813 80 37 196617 p thru;#P newex 815 28 46 196617 unpack;#P newex 946 312 27 196617 * 1.;#P newex 909 312 27 196617 * 1.;#P newex 985 349 64 196617 pak size 0 0;#P newex 776 351 85 196617 pak offset 0 0;#P newex 872 351 85 196617 pak dim 0 0;#P connect 47 1 46 0;#P connect 36 0 35 0;#P fasten 35 0 34 0 99 62 99 62;#P fasten 38 0 34 0 164 57 99 57;#P connect 57 0 34 0;#P connect 53 0 34 0;#P connect 54 0 34 0;#P connect 37 0 35 1;#P fasten 47 1 43 0 251 168 140 168;#P connect 34 1 58 0;#P connect 55 0 54 1;#P fasten 34 0 47 1 99 86 251 86;#P connect 56 0 54 2;#P connect 47 1 42 0;#P connect 42 1 39 0;#P connect 39 0 44 0;#P fasten 45 0 40 0 381 288 358 288;#P connect 44 0 40 0;#P connect 42 0 40 0;#P connect 42 2 40 0;#P connect 40 0 41 0;#P connect 39 1 45 0;#P connect 47 1 48 0;#P connect 1 0 48 0;#P fasten 0 0 48 0 877 376 781 376;#P fasten 2 0 49 0 990 405 781 405;#P connect 48 0 49 0;#P connect 11 1 6 0;#P connect 6 0 21 0;#P connect 21 0 30 0;#P connect 30 0 22 0;#P connect 22 0 1 1;#P connect 39 0 5 0;#P connect 5 0 11 0;#P hidden fasten 26 0 21 1 1122 123 848 123;#P connect 24 0 1 2;#P connect 5 1 12 0;#P connect 12 1 7 0;#P connect 7 0 23 0;#P connect 23 0 31 0;#P connect 31 0 24 0;#P hidden fasten 26 0 23 1 1122 123 911 123;#P connect 22 0 28 0;#P connect 28 0 3 0;#P connect 3 0 0 1;#P connect 39 1 10 0;#P connect 10 0 13 0;#P connect 13 1 8 0;#P connect 8 0 17 0;#P connect 17 0 32 0;#P connect 32 0 18 0;#P connect 18 0 28 1;#P connect 29 0 4 0;#P connect 4 0 0 2;#P connect 24 0 29 0;#P hidden fasten 25 0 17 1 1164 123 976 123;#P connect 10 1 14 0;#P connect 14 1 9 0;#P connect 9 0 19 0;#P connect 19 0 33 0;#P connect 33 0 20 0;#P connect 20 0 29 1;#P connect 3 0 2 1;#P hidden fasten 25 0 19 1 1164 123 1037 123;#P connect 4 0 2 2;#P connect 47 1 51 0;#P connect 51 0 52 0;#P connect 27 0 26 0;#P connect 50 0 27 0;#P connect 27 0 25 0;#P pop;#P newobj 619 190 36 196617 p test;#P objectname test;#P user com 254 105 291 196617 32;#K set 0 17249 27747 30060 24948 25888 29045 24942 29801 29817 8303 26144 28015 29801 28526 11296 29807 8290 25888 30067 25956 8308 28448 26217 28260 8308 26725 8291 28526 29810 24931 29801 28526;#K end;#P newex 439 436 82 196617 jmod.pass /size;#P comment 151 400 75 196617 VIDEO OUTPUT;#N comlet Video output;#P outlet 154 380 15 0;#P message 232 146 33 196617 reset;#P user com 188 127 87 196617 8;#K set 0 16757 29807 11619 28526 29810 24931 29801 28526;#K end;#N vpatcher 1033 196 1499 497;#P origin -720 -261;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 50 79 65 196617 jit.rgb2luma;#N comlet Threshold;#P inlet 186 26 15 0;#P comment 222 167 68 196617 set threshold;#P flonum 186 167 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 50 200 105 196617 jit.op @op > @val 0.1;#N comlet Graph on;#P inlet 50 26 15 0;#P newex 50 105 53 196617 jit.change;#N comlet Video out;#P outlet 50 231 15 0;#P newex 50 168 85 196617 jit.op @op absdiff;#P newex 50 132 27 196617 t l l;#P window linecount 4;#P comment 322 145 100 196617 Find Quantity of Motion as difference between two consecutive frames.;#P connect 5 0 10 0;#P connect 10 0 4 0;#P connect 4 0 1 0;#P connect 1 1 2 0;#P connect 2 0 6 0;#P connect 6 0 3 0;#P connect 1 0 2 1;#P fasten 7 0 6 1 191 191 150 191;#P connect 9 0 7 0;#P pop;#P newobj 203 102 48 196617 p motion;#P toggle 174 125 15 0;#N vpatcher -1628 100 -1106 697;#P origin -29 0;#P outlet 192 552 15 0;#P outlet 82 542 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P newex 13 330 43 196617 Lchange;#P number 315 297 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 254 297 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 189 297 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 126 297 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 66 387 39 196617 / 240.;#P newex 13 387 39 196617 / 320.;#P newex 13 358 63 196617 unpack 0. 0.;#P newex 13 303 52 196617 route dim;#P newex 13 278 71 196617 jit.matrixinfo;#P newex 228 517 79 196617 pak 0 0 0 0 0 0;#P newex 341 483 42 196617 arj.diff;#P newex 286 483 42 196617 arj.diff;#P newex 228 548 64 196617 s draw-rect;#N comlet Reset;#P inlet 472 28 15 0;#N comlet Open/close;#P inlet 146 28 15 0;#N comlet Video stream;#P inlet 205 28 15 0;#P button 472 204 15 0;#P message 430 247 33 196617 1000;#P message 472 247 14 196617 0;#P toggle 146 55 15 0;#P newex 146 76 27 196617 gate;#P newex 102 471 109 196617 pak framerect 0 0 0 0;#P newex 189 437 27 196617 / 1.;#P newex 189 270 40 196617 trough;#P newex 126 437 27 196617 / 1.;#P newex 126 270 40 196617 trough;#P newex 315 437 27 196617 / 1.;#P newex 315 270 40 196617 peak;#P newex 254 437 27 196617 / 1.;#P newex 254 270 40 196617 peak;#P comment 263 249 50 196617 boundmax;#P comment 149 249 50 196617 boundmin;#P newex 290 157 35 196617 sel -1;#P newex 254 157 35 196617 sel -1;#P newex 182 157 35 196617 sel -1;#P newex 146 157 35 196617 sel -1;#P newex 254 135 46 196617 unpack;#P newex 315 212 58 196617 arj.smooth;#P newex 254 212 58 196617 arj.smooth;#P newex 189 212 58 196617 arj.smooth;#P newex 126 212 58 196617 arj.smooth;#P newex 146 135 46 196617 unpack;#P newex 146 115 226 196617 jit.findbounds @min 1 @max 1;#P window linecount 1;#P comment 250 56 157 196617 Find the boundaries of the image.;#P fasten 23 0 35 0 151 101 18 101;#P connect 35 0 36 0;#P connect 36 0 44 0;#P connect 44 0 37 0;#P connect 37 0 38 0;#P connect 37 1 39 0;#P connect 22 0 45 0;#P connect 8 1 3 0;#P connect 3 0 18 0;#P connect 18 0 40 0;#P connect 40 0 19 0;#P connect 19 0 22 1;#P connect 38 0 19 1;#P connect 29 0 24 0;#P connect 24 0 23 0;#P connect 23 0 1 0;#P connect 1 0 2 0;#P connect 2 0 8 0;#P connect 21 0 22 2;#P connect 26 0 18 1;#P connect 28 0 23 1;#P connect 15 0 22 3;#P connect 2 1 9 0;#P connect 9 1 4 0;#P connect 4 0 20 0;#P connect 20 0 41 0;#P connect 41 0 21 0;#P connect 34 0 46 0;#P connect 17 0 22 4;#P connect 39 0 21 1;#P connect 26 0 20 1;#P connect 19 0 34 0;#P connect 34 0 31 0;#P connect 21 0 34 1;#P connect 1 1 7 0;#P connect 7 0 10 0;#P connect 10 1 5 0;#P connect 5 0 14 0;#P connect 14 0 42 0;#P connect 42 0 15 0;#P connect 15 0 34 2;#P connect 17 0 34 3;#P connect 38 0 15 1;#P connect 32 0 34 4;#P connect 25 0 14 1;#P connect 19 0 32 0;#P connect 7 1 11 0;#P connect 33 0 34 5;#P connect 11 1 6 0;#P connect 6 0 16 0;#P connect 16 0 43 0;#P connect 43 0 17 0;#P connect 15 0 32 1;#P connect 39 0 17 1;#P connect 21 0 33 0;#P connect 25 0 16 1;#P connect 17 0 33 1;#P connect 27 0 26 0;#P connect 30 0 27 0;#P connect 27 0 25 0;#P pop;#P newobj 174 166 68 196617 p contraction;#P comment 483 273 311 196617 ctrl-click and drag to crop. alt-click to zoom. cmd-click to offset.;#P window linecount 8;#P comment 527 1188 335 196617 a) read in a movie b) copy the audio track from another "movie" -- in this case an audio file -- to a new track in the first movie. so \, to jit.qt.movie: "read" \, to read in the movie "copy drive:/path/to/movie2 track 1 track -1" \, to copy the first track from the 2nd movie into a new track in the 1st movie "savemovie" or "savemovieas" \, to save the movie "flatten faststart inplace" \, to flatten the data \, if you want (otherwise \, the movie only contains a "reference" to the audio data \, not the data itself);#P user jit.pwindow 84 454 322 242 0 1 0 0 1 0;#P user jit.pwindow 438 456 168 183 0 1 0 0 1 0;#P window linecount 1;#P comment 40 400 108 196617 RETURNED MESSAGES;#P comment 248 401 75 196617 VIDEO OUTPUT;#N comlet Returned messages;#P outlet 42 380 15 0;#N comlet Video output;#P outlet 251 381 15 0;#P newex 42 60 408 196617 jmod.oscroute /genframe /direct /auto_contract /threshold /reset /pwindow_dumpout;#P comment 59 36 75 196617 INSTRUCTIONS;#N comlet Instructions;#P inlet 42 36 15 0;#P comment 509 36 75 196617 VIDEO INPUT;#N comlet Video input;#P inlet 587 36 15 0;#N vpatcher 1165 266 1619 535;#P window setfont "Sans Serif" 9.;#P newex 29 51 40 196617 change;#P newex 269 122 91 196617 scale -240 0 3. 1.;#P flonum 329 196 31 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 329 144 55 196617 clip 0 240;#P newex 329 167 85 196617 scale 240 0 0. 1.;#P newex 269 96 70 196617 split -2000 0;#P newex 329 216 40 196617 s zoom;#P number 206 196 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 168 171 27 196617 int;#P newex 185 144 27 196617 +;#P newex 206 216 55 196617 s offset-y;#P number 115 196 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 29 73 31 196617 sel 1;#P inlet 29 31 15 0;#P newex 77 166 27 196617 int;#P newex 94 139 27 196617 +;#P message 269 74 20 196617 \$6;#P message 94 83 35 196617 \$5 \$6;#P newex 94 107 39 196617 unpack;#P newex 94 56 51 196617 route 3 6;#P inlet 94 31 15 0;#P newex 115 216 55 196617 s offset-x;#P comment 152 34 204 196617 Not really sure what these things are for...;#P connect 9 0 22 0;#P connect 22 0 10 0;#P connect 10 0 8 0;#P connect 2 0 3 0;#P connect 3 0 5 0;#P connect 5 0 4 0;#P connect 4 0 7 0;#P connect 7 0 8 1;#P connect 8 0 7 1;#P connect 7 0 11 0;#P connect 11 0 1 0;#P fasten 4 1 13 0 128 127 190 127;#P connect 13 0 14 1;#P fasten 14 0 13 1 173 191 216 191 216 139 207 139;#P connect 13 0 15 0;#P connect 15 0 12 0;#P connect 3 1 6 0;#P connect 6 0 17 0;#P connect 17 0 21 0;#P connect 17 1 19 0;#P connect 19 0 18 0;#P connect 18 0 20 0;#P connect 21 0 20 0;#P connect 20 0 16 0;#P pop;#P newobj 393 219 72 196617 p zoom-offset;#P newex 372 172 105 196617 jmod.pwindow.mouse;#P newex 68 258 81 196617 pvar draw-rect;#N vpatcher -1024 364 -86 824;#P origin -79 0;#P outlet 608 319 15 0;#P inlet 637 47 15 0;#P window setfont "Sans Serif" 9.;#P newex 635 320 31 196617 print;#P button 593 226 15 0;#P message 475 131 20 196617 \$6;#P message 438 131 20 196617 \$5;#P newex 475 153 23 196617 abs;#P newex 438 153 23 196617 abs;#P message 341 156 20 196617 \$1;#P message 341 117 35 196617 \$2 \$4;#P newex 341 136 31 196617 lsort;#P message 304 156 20 196617 \$1;#P message 304 117 35 196617 \$1 \$3;#P newex 304 136 31 196617 lsort;#P newex 656 198 39 196617 unpack;#P newex 607 198 39 196617 unpack;#P message 656 157 35 196617 \$2 \$4;#P newex 656 176 31 196617 lsort;#P message 607 157 35 196617 \$1 \$3;#P newex 607 176 31 196617 lsort;#P newex 304 68 42 196617 route 7;#P newex 704 176 49 196617 deferlow;#P message 704 198 26 196617 120;#P newex 704 155 45 196617 loadbang;#P newex 341 260 27 196617 * 1.;#P newex 304 260 27 196617 * 1.;#P newex 475 260 27 196617 * 1.;#P newex 438 260 27 196617 * 1.;#P newex 209 182 39 196617 / 240.;#P newex 156 138 52 196617 route dim;#P newex 156 160 63 196617 unpack 0. 0.;#P newex 156 118 71 196617 jit.matrixinfo;#P inlet 156 32 15 0;#P newex 156 182 39 196617 / 320.;#P comment 255 168 45 196617 clicked x \, y pos;#P outlet 466 372 15 0;#P outlet 333 372 15 0;#P inlet 304 32 15 0;#P newex 608 257 109 196617 pak framerect 0 0 0 0;#P newex 466 342 70 196617 pak /size 0 0;#P number 341 174 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 304 174 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 267 301 85 196617 pak offset 0 0;#P number 475 174 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 438 174 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 401 301 85 196617 pak dim 0 0;#P user panel 601 248 129 56;#X brgb 191 191 191;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P comment 739 256 136 196617 This is what draws the rectangle in the movie. Using a patcher-variable to send the information.;#P comment 387 167 45 196617 diff x \, y pos;#P comment 7 123 148 196617 This step is necessary to compensate if the incoming video has a different size than 320 x 240 (the size of the drawing window).;#P comment 347 71 194 196617 Routing values when ctrl-key is pressed;#P comment 665 47 100 196617 Receive coordinates;#P connect 19 0 20 0;#P connect 20 0 22 0;#P connect 22 0 21 0;#P connect 21 0 18 0;#P connect 21 1 23 0;#P connect 14 0 31 0;#P fasten 31 0 39 0 309 96 309 96;#P connect 50 0 39 0;#P connect 39 0 38 0;#P connect 38 0 40 0;#P connect 40 0 10 0;#P connect 10 0 26 0;#P connect 26 0 9 1;#P connect 18 0 26 1;#P connect 9 0 15 0;#P connect 6 0 15 0;#P fasten 31 0 42 0 309 103 346 103;#P connect 50 0 42 0;#P connect 42 0 41 0;#P connect 41 0 43 0;#P connect 43 0 11 0;#P connect 11 0 27 0;#P connect 27 0 9 2;#P connect 23 0 27 1;#P fasten 31 0 46 0 309 103 443 103;#P connect 50 0 46 0;#P connect 46 0 44 0;#P connect 44 0 7 0;#P connect 7 0 24 0;#P connect 24 0 6 1;#P connect 18 0 24 1;#P connect 12 0 16 0;#P fasten 31 0 47 0 309 103 480 103;#P connect 50 0 47 0;#P connect 47 0 45 0;#P connect 45 0 8 0;#P connect 8 0 25 0;#P connect 25 0 6 2;#P connect 23 0 25 1;#P connect 24 0 12 1;#P connect 25 0 12 2;#P fasten 31 0 33 0 309 103 612 103;#P connect 33 0 32 0;#P connect 32 0 36 0;#P connect 48 0 13 0;#P connect 13 0 51 0;#P connect 36 0 13 1;#P connect 13 0 49 0;#P fasten 31 0 35 0 309 103 661 103;#P connect 35 0 34 0;#P connect 34 0 37 0;#P connect 29 0 13 2;#P connect 37 0 13 2;#P connect 36 1 13 3;#P connect 28 0 30 0;#P connect 30 0 29 0;#P connect 37 1 13 4;#P connect 29 0 13 4;#P pop;#P newobj 158 221 84 196617 p crop-rectangle;#P newex 42 225 40 196617 t b b l;#P newex 42 285 110 196617 jit.lcd 4 char 320 240;#P newex 259 274 205 196617 jit.submatrix @dim 10 10 @offset 100 100;#B color 5;#P window linecount 2;#P comment 55 309 123 196617 Click and drag inside this window to crop image.;#P connect 10 0 12 0;#P hidden connect 8 0 3 0;#P connect 12 0 3 0;#P connect 3 0 2 0;#P connect 3 2 2 0;#P connect 5 0 2 0;#P connect 4 1 14 0;#P connect 4 2 5 0;#P connect 21 0 5 0;#P connect 3 1 5 0;#P connect 2 0 18 0;#P connect 2 0 26 0;#P hidden connect 8 0 4 0;#P connect 12 2 22 0;#P connect 22 0 21 0;#P connect 6 0 4 1;#P hidden connect 8 0 23 0;#P connect 23 0 21 1;#P connect 12 4 25 0;#P connect 25 0 21 2;#P connect 21 1 4 2;#P connect 12 3 23 1;#P connect 1 0 13 0;#P connect 4 0 1 0;#P hidden connect 8 0 1 0;#P connect 12 5 6 0;#P connect 18 1 6 0;#P connect 6 1 7 0;#P connect 4 1 28 0;#P connect 28 0 17 0;#P connect 1 0 17 0;#P connect 6 0 7 1;#P pop;