max v2;#N vpatcher 74 111 693 566;#P window setfont "Sans Serif" 9.;#P window linecount 2;#P newex 28 365 272 196617 jmod.return $1 /color @type msg_list @description "RGB triplet representing a mix of the colors on the palette.";#P window linecount 1;#N vpatcher 30 89 330 242;#P window setfont "Sans Serif" 9.;#P newex 50 50 40 196617 t clear;#P newex 50 72 174 196617 jit.matrix $0_colors 1 float32 12 3;#P inlet 50 30 15 0;#P connect 0 0 2 0;#P connect 2 0 1 0;#P pop;#P newobj 384 95 41 196617 p clear;#N vpatcher 30 89 630 489;#P inlet 51 47 15 0;#P window setfont "Sans Serif" 9.;#P newex 51 71 41 196617 sel 0 1;#P message 206 110 92 196617 clear \, connect 0 1;#P message 51 110 151 196617 clear \, connect 0 2 \, connect 1 0;#P outlet 51 152 15 0;#P connect 4 0 3 0;#P connect 3 0 1 0;#P fasten 2 0 0 0 211 138 56 138;#P connect 1 0 0 0;#P fasten 3 1 2 0 71 99 211 99;#P pop;#P newobj 28 145 50 196617 p routing;#P newex 28 194 57 196617 router 2 3;#N vpatcher 130 340 672 667;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 70 254 100 196617 interpolated color;#P newex 286 201 62 196617 clip 0. 255.;#P newex 168 201 62 196617 clip 0. 255.;#P newex 50 201 59 196617 clip 0. 255;#P newex 50 225 247 196617 pack 0. 0. 0.;#P newex 359 101 67 196617 prepend step;#P window linecount 2;#P newex 286 162 110 196617 jmod.cubic_interpolate @step 0.02;#P newex 168 162 110 196617 jmod.cubic_interpolate @step 0.02;#P window linecount 1;#P newex 50 50 246 196617 unpack 0. 0. 0.;#P window linecount 2;#P newex 50 162 110 196617 jmod.cubic_interpolate @step 0.02;#P inlet 50 29 15 0;#P inlet 359 29 15 0;#P inlet 8 29 15 0;#P outlet 50 254 15 0;#P outlet 392 254 15 0;#P window linecount 0;#P comment 412 254 100 196617 ask for new color;#P connect 5 0 7 0;#P fasten 3 0 6 0 13 122 55 122;#P lcolor 8;#P fasten 10 0 6 0 364 147 55 147;#P lcolor 12;#P connect 7 0 6 0;#P connect 6 0 12 0;#P connect 12 0 11 0;#P connect 11 0 2 0;#P fasten 3 0 8 0 13 120 173 120;#P lcolor 8;#P fasten 10 0 8 0 364 149 173 149;#P lcolor 12;#P connect 7 1 8 0;#P connect 8 0 13 0;#P connect 13 0 11 1;#P connect 7 2 9 0;#P fasten 3 0 9 0 13 118 291 118;#P lcolor 8;#P fasten 10 0 9 0 364 151 291 151;#P lcolor 12;#P connect 9 0 14 0;#P connect 14 0 11 2;#P connect 4 0 10 0;#P fasten 9 1 1 0 341 197 397 197;#P pop;#P newobj 69 309 104 196617 p cubic_interpolation;#P inlet 116 30 15 0;#P window linecount 2;#N vpatcher 50 119 595 518;#P window setfont "Sans Serif" 9.;#P newex 54 184 60 196617 jmod.round;#P newex 54 163 101 196617 pack 0. 0. 0.;#P newex 54 142 146 196617 tap.colorspace @mode hsl2rgb;#P newex 54 121 60 196617 jmod.round;#P window linecount 3;#P message 54 277 105 196617 setcell \$4 0 val \$1 \, setcell \$4 1 val \$2 \, setcell \$4 2 val \$3;#P outlet 424 335 15 0;#P window linecount 1;#P newex 362 142 50 196617 clip 1 12;#P inlet 54 29 15 0;#P newex 54 79 318 196617 t l 0 l;#P newex 54 253 136 196617 zl join;#P newex 54 205 27 196617 t l b;#N counter 0 11;#X flags 0 0;#P newobj 180 232 68 196617 counter 0 11;#P newex 54 100 55 196617 zl group 3;#P newex 362 161 40 196617 change;#P message 362 198 50 196617 dim \$1 3;#P newex 362 123 27 196617 / 3;#P newex 362 103 34 196617 zl len;#P newex 54 337 105 196617 jit.matrix $0_colors;#P window linecount 0;#P comment 443 335 38 196617 dim;#P connect 11 0 10 0;#P connect 10 0 6 0;#P connect 6 0 15 0;#P connect 15 0 16 0;#P connect 16 0 17 0;#P connect 17 0 18 0;#P connect 18 0 8 0;#P connect 8 0 9 0;#P connect 9 0 14 0;#P fasten 4 0 1 0 367 326 59 326;#P connect 14 0 1 0;#P connect 16 1 17 1;#P connect 16 2 17 2;#P fasten 8 1 7 0 76 227 185 227;#P connect 7 0 9 1;#P connect 10 1 7 2;#P connect 10 2 2 0;#P connect 2 0 3 0;#P connect 3 0 12 0;#P connect 12 0 5 0;#P connect 5 0 4 0;#P fasten 5 0 13 0 367 184 429 184;#P pop;#P newobj 250 182 56 196617 p set_colors;#P newex 116 55 480 196617 jmod.oscroute /gen_color /random/mode /colors /random/step_size /clear /interpolate/step_size /interpolate;#P window linecount 1;#N vpatcher 254 103 854 503;#P outlet 129 215 15 0;#P window setfont "Sans Serif" 9.;#P newex 129 181 43 196617 jit.spill;#P newex 129 152 126 196617 jit.la.mult;#P newex 129 127 105 196617 jit.matrix $0_colors;#P newex 129 96 27 196617 t b l;#P inlet 129 43 15 0;#P connect 0 0 1 0;#P connect 1 0 2 0;#P connect 2 0 3 0;#P connect 3 0 4 0;#P connect 4 0 5 0;#P fasten 1 1 3 1 151 118 250 118;#P pop;#P newobj 116 253 122 196617 p mix;#N vpatcher 0 44 653 440;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 517 35 87 196617 step_size;#P inlet 496 35 15 0;#P comment 124 35 87 196617 make new color;#P newex 251 79 21 196617 t 2;#P window linecount 0;#P newex 215 79 21 196617 t 1;#P inlet 215 35 15 0;#P newex 215 55 83 196617 sel random walk;#P newex 69 126 47 196617 gate 2 1;#P window linecount 1;#N vpatcher 357 167 947 725;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P newex 331 59 83 196617 maximum 0.001;#P inlet 331 29 15 0;#P newex 91 197 73 196617 jit.op @op abs;#P newex 91 174 64 196617 jit.op @op +;#P window linecount 1;#P newex 91 142 108 196617 jit.op @op * @val 0.1;#P newex 50 342 65 196617 jit.op @op *;#P newex 105 315 27 196617 !/ 1.;#P newex 105 292 166 196617 if ($f1>0.) then $f1 else out2 bang;#P newex 105 269 138 196617 * 12.;#P newex 91 236 53 196617 jit.3m;#P newex 91 107 116 196617 jit.noise 1 float32 1 12;#P message 91 64 50 196617 dim 1 \$1;#P inlet 91 29 15 0;#P inlet 28 29 15 0;#P outlet 50 381 17 0;#P fasten 12 0 9 0 96 224 55 224;#P connect 9 0 0 0;#P connect 2 0 3 0;#P connect 1 0 4 0;#P connect 3 0 4 0;#P fasten 7 1 4 0 266 300 287 300 287 95 96 95;#P connect 4 0 10 0;#P connect 10 0 11 0;#P connect 11 0 12 0;#P connect 12 0 5 0;#P connect 5 1 6 0;#P connect 6 0 7 0;#P connect 7 0 8 0;#P connect 8 0 9 1;#P fasten 9 0 11 1 55 368 320 368 320 168 150 168;#P fasten 14 0 10 1 336 136 194 136;#P fasten 2 0 6 1 96 56 238 56;#P connect 13 0 14 0;#P pop;#P newobj 129 217 40 196617 p walk;#P window linecount 0;#N vpatcher 420 104 1020 504;#P window setfont "Sans Serif" 9.;#P newex 50 231 65 196617 jit.op @op *;#P newex 105 204 27 196617 !/ 1.;#P newex 105 181 166 196617 if ($f1>0.) then $f1 else out2 bang;#P newex 105 158 138 196617 * 12.;#P newex 91 133 53 196617 jit.3m;#P newex 91 107 116 196617 jit.noise 1 float32 1 12;#P message 91 64 50 196617 dim 1 \$1;#P inlet 91 29 15 0;#P inlet 28 29 15 0;#P outlet 50 253 15 0;#P fasten 4 0 9 0 96 129 55 129;#P connect 9 0 0 0;#P connect 2 0 3 0;#P fasten 7 1 4 0 266 208 287 208 287 95 96 95;#P connect 3 0 4 0;#P connect 1 0 4 0;#P connect 4 0 5 0;#P connect 5 1 6 0;#P connect 6 0 7 0;#P connect 7 0 8 0;#P connect 8 0 9 1;#P fasten 2 0 6 1 96 56 238 56;#P pop;#P newobj 69 217 51 196617 p random;#P newex 106 55 23 196617 t b;#P inlet 368 35 15 0;#P inlet 106 35 15 0;#P outlet 69 296 15 0;#P comment 388 35 87 196617 number of colors;#P comment 234 35 87 196617 mode;#P fasten 11 0 8 0 220 113 74 113;#P fasten 12 0 8 0 256 113 74 113;#P connect 8 0 6 0;#P connect 7 0 2 0;#P connect 6 0 2 0;#P connect 3 0 5 0;#P connect 5 0 8 1;#P fasten 4 0 6 1 373 175 115 175;#P connect 8 1 7 0;#P fasten 4 0 7 1 373 178 149 178;#P fasten 14 0 7 2 501 207 164 207;#P connect 10 0 9 0;#P connect 9 0 11 0;#P connect 9 1 12 0;#P pop;#P newobj 116 226 211 196617 p color_weights;#P fasten 2 6 7 0 523 129 33 129;#P connect 7 0 6 0;#P connect 6 0 9 0;#P connect 5 0 9 0;#P fasten 2 0 6 1 121 170 56 170;#P connect 6 1 5 0;#P fasten 1 0 6 2 121 276 106 276 106 187 79 187;#P connect 4 0 2 0;#P fasten 6 2 0 0 63 216 121 216;#P fasten 5 1 0 0 168 331 339 331 339 221 121 221;#P lcolor 13;#P connect 0 0 1 0;#P connect 1 0 5 1;#P fasten 2 5 5 2 456 301 168 301;#P connect 2 1 0 1;#P connect 2 2 3 0;#P connect 3 0 0 2;#P connect 2 3 0 3;#P connect 2 4 8 0;#P pop;