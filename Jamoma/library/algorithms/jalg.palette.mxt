max v2;#N vpatcher 66 264 685 719;#P window setfont "Sans Serif" 9.;#N vpatcher 254 103 854 503;#P outlet 129 215 15 0;#P window setfont "Sans Serif" 9.;#P newex 129 181 43 196617 jit.spill;#P newex 129 152 126 196617 jit.la.mult;#P newex 129 127 105 196617 jit.matrix $0_colors;#P newex 129 96 27 196617 t b l;#P inlet 129 43 15 0;#P connect 0 0 1 0;#P connect 1 0 2 0;#P connect 2 0 3 0;#P connect 3 0 4 0;#P connect 4 0 5 0;#P fasten 1 1 3 1 151 118 250 118;#P pop;#P newobj 28 339 122 196617 p mix;#P window linecount 2;#P newex 28 365 272 196617 jmod.return $1 /color @type msg_list @description "RGB triplet representing a mix of the colors on the palette.";#P window linecount 1;#N vpatcher 30 89 330 242;#P window setfont "Sans Serif" 9.;#P newex 50 50 40 196617 t clear;#P newex 50 72 174 196617 jit.matrix $0_colors 1 float32 12 3;#P inlet 50 30 15 0;#P connect 0 0 2 0;#P connect 2 0 1 0;#P pop;#P newobj 384 95 41 196617 p clear;#N vpatcher 514 109 867 322;#P inlet 51 47 15 0;#P window setfont "Sans Serif" 9.;#P newex 51 71 41 196617 sel 0 1;#P message 206 110 92 196617 clear \, connect 0 1;#P message 51 110 151 196617 clear \, connect 0 2 \, connect 1 0;#P outlet 51 152 15 0;#P connect 4 0 3 0;#P connect 3 0 1 0;#P fasten 2 0 0 0 211 138 56 138;#P connect 1 0 0 0;#P fasten 3 1 2 0 71 99 211 99;#P pop;#P newobj 28 145 50 196617 p routing;#P newex 28 194 57 196617 router 2 3;#N vpatcher 0 44 940 628;#P origin 20 0;#P window setfont "Sans Serif" 9.;#P newex 65 502 97 196617 jit.op @op *;#P newex 152 479 31 196617 !/ 1.;#P newex 152 457 131 196617 if $f1==0. then 1. else $f1;#P newex 152 434 58 196617 * 12.;#P newex 138 411 53 196617 jit.3m;#P newex 65 382 121 196617 jit.clip @min 0. @max 1.;#P newex 379 61 50 196617 clip 0. 1.;#P newex 212 212 47 196617 t f b;#P newex 212 234 27 196617 - 1.;#P newex 65 190 157 196617 if $f1>=1 then out2 $f1 else $f1;#P newex 65 166 44 196617 + 0.1;#P newex 65 140 27 196617 f;#P newex 65 287 651 196617 t b b b b f f f f;#P newex 65 357 561 196617 jit.expr 1 float32 1 12 @inputs 7 @expr "in[0]*in[4] + in[1]*in[5] + in[2]*in[6] + in[3]";#P window linecount 2;#P newex 65 316 71 196617 jit.matrix $0_a0;#P newex 156 316 71 196617 jit.matrix $0_a1;#P newex 247 316 71 196617 jit.matrix $0_a2;#P newex 338 316 71 196617 jit.matrix $0_a3;#P window linecount 1;#P newex 530 316 73 196617 expr $f1*$f1;#P newex 429 316 96 196617 expr $f1*$f1*$f1;#N vpatcher 10 59 881 650;#P window setfont "Sans Serif" 9.;#P window linecount 2;#P newex 417 493 165 196617 jit.expr 1 float32 1 12 @inputs 3 @expr "in[0]-in[1]-in[2]";#P newex 65 478 123 196617 jit.expr 1 float32 1 12 @expr "in[1]-in[0]";#P newex 593 455 170 196617 jit.expr 1 float32 1 12 @inputs 4 @expr "in[3]-in[2]-in[0]+in[1]";#P window linecount 1;#P newex 593 532 157 196617 jit.matrix $0_a0 1 float32 1 12;#P newex 417 532 157 196617 jit.matrix $0_a1 1 float32 1 12;#P newex 65 532 157 196617 jit.matrix $0_a2 1 float32 1 12;#P newex 241 532 157 196617 jit.matrix $0_a3 1 float32 1 12;#P newex 65 364 89 196617 jit.matrix $0_y0;#P newex 241 364 89 196617 jit.matrix $0_y1;#P newex 417 364 89 196617 jit.matrix $0_y2;#P newex 752 364 89 196617 jit.matrix $0_y3;#P newex 65 71 88 196617 t b l;#P inlet 65 44 15 0;#P newex 143 245 27 196617 t l b;#P newex 143 195 27 196617 t l b;#P newex 143 145 27 196617 t l b;#P newex 143 95 27 196617 t l b;#P newex 143 270 197 196617 jit.matrix $0_y0 1 float32 1 12 @thru 0;#P newex 143 220 197 196617 jit.matrix $0_y1 1 float32 1 12 @thru 0;#P newex 143 170 197 196617 jit.matrix $0_y2 1 float32 1 12 @thru 0;#P newex 143 120 197 196617 jit.matrix $0_y3 1 float32 1 12 @thru 0;#P connect 8 0 9 0;#P connect 9 0 13 0;#P connect 13 0 19 0;#P connect 19 0 15 0;#P connect 9 1 4 0;#P connect 4 0 0 0;#P connect 4 1 0 0;#P connect 0 0 5 0;#P connect 5 1 1 0;#P connect 5 0 1 0;#P connect 1 0 6 0;#P connect 6 1 2 0;#P connect 6 0 2 0;#P connect 2 0 7 0;#P connect 7 1 3 0;#P connect 7 0 3 0;#P fasten 11 0 19 1 422 397 183 397;#P fasten 9 0 12 0 70 341 246 341;#P connect 12 0 14 0;#P fasten 9 0 11 0 70 338 422 338;#P fasten 13 0 20 0 70 451 422 451;#P connect 20 0 16 0;#P fasten 12 0 20 1 246 429 499 429;#P connect 18 0 20 2;#P fasten 13 0 18 0 70 446 598 446;#P connect 18 0 17 0;#P fasten 12 0 18 1 246 425 651 425;#P fasten 11 0 18 2 422 403 704 403;#P fasten 9 0 10 0 70 335 757 335;#P connect 10 0 18 3;#P pop;#P newobj 150 64 71 196617 p coefficients;#P comment 85 532 100 196617 interpolated color;#P inlet 150 34 15 0;#P inlet 379 34 15 0;#P inlet 65 34 15 0;#P outlet 65 532 15 0;#P outlet 756 532 15 0;#P comment 776 532 100 196617 ask for new color;#P connect 3 0 16 0;#P connect 16 0 17 0;#P connect 17 0 18 0;#P connect 18 0 15 0;#P connect 19 0 15 0;#P connect 15 0 13 0;#P connect 13 0 14 0;#P connect 14 0 22 0;#P connect 22 0 27 0;#P connect 27 0 2 0;#P fasten 15 7 16 1 707 310 729 310 729 131 87 131;#P connect 21 0 17 1;#P fasten 22 0 23 0 70 405 143 405;#P connect 5 0 7 0;#P connect 23 1 24 0;#P connect 24 0 25 0;#P connect 25 0 26 0;#P connect 26 0 27 1;#P connect 15 1 12 0;#P connect 12 0 14 1;#P connect 18 1 20 0;#P connect 20 0 19 0;#P connect 15 2 11 0;#P connect 11 0 14 2;#P connect 15 3 10 0;#P connect 10 0 14 3;#P connect 4 0 21 0;#P connect 15 4 8 0;#P connect 8 0 14 4;#P connect 9 0 14 5;#P connect 15 5 9 0;#P connect 15 6 14 6;#P fasten 20 1 1 0 254 241 761 241;#P pop;#P newobj 69 309 152 196617 p cubic_interpolation;#P inlet 116 30 15 0;#P window linecount 2;#N vpatcher 50 119 663 573;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 54 160 60 196617 jmod.round;#P newex 54 139 101 196617 pack 0. 0. 0.;#P newex 54 118 146 196617 tap.colorspace @mode hsl2rgb;#P newex 54 97 60 196617 jmod.round;#P newex 54 76 55 196617 zl group 3;#P window linecount 3;#P message 54 259 105 196617 setcell \$4 0 val \$1 \, setcell \$4 1 val \$2 \, setcell \$4 2 val \$3;#P outlet 516 349 15 0;#P window linecount 1;#P newex 516 189 50 196617 clip 1 12;#P inlet 54 29 15 0;#P newex 54 55 474 196617 t l 0 clear l;#P newex 54 235 136 196617 zl join;#P newex 54 187 27 196617 t l b;#N counter 0 11;#X flags 0 0;#P newobj 180 212 68 196617 counter 0 11;#P newex 516 208 40 196617 change;#P newex 516 170 27 196617 / 3;#P newex 516 150 34 196617 zl len;#P newex 54 319 174 196617 jit.matrix $0_colors 1 float32 12 3;#P window linecount 0;#P comment 535 349 38 196617 dim;#P connect 9 0 8 0;#P connect 8 0 13 0;#P connect 13 0 14 0;#P connect 14 0 15 0;#P connect 15 0 16 0;#P connect 16 0 17 0;#P connect 17 0 6 0;#P connect 6 0 7 0;#P connect 7 0 12 0;#P connect 12 0 1 0;#P fasten 8 2 1 0 367 309 59 309;#P connect 15 1 16 1;#P connect 15 2 16 2;#P fasten 6 1 5 0 76 209 185 209;#P connect 5 0 7 1;#P connect 8 1 5 2;#P connect 8 3 2 0;#P connect 2 0 3 0;#P connect 3 0 10 0;#P connect 10 0 4 0;#P connect 4 0 11 0;#P pop;#P newobj 250 182 56 196617 p set_colors;#P newex 116 55 482 196617 jmod.oscroute /gencolor /random/mode /colors /random/step_size /clear /interpolate/step_size /interpolate;#P window linecount 1;#N vpatcher 0 44 653 440;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 517 35 87 196617 step_size;#P inlet 496 35 15 0;#P comment 124 35 87 196617 make new color;#P newex 251 79 21 196617 t 2;#P window linecount 0;#P newex 215 79 21 196617 t 1;#P inlet 215 35 15 0;#P newex 215 55 83 196617 sel random walk;#P newex 69 126 47 196617 gate 2 1;#P window linecount 1;#N vpatcher 338 65 923 777;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P newex 54 304 134 196617 jit.op 1 float32 1 12 @op *;#P newex 178 73 27 196617 t b i;#P newex 178 114 124 196617 jit.matrix 1 float32 1 12;#P newex 178 137 224 196617 jit.expr 1 float32 1 12 @expr "(cell[1])<in[1]";#P newex 442 77 83 196617 maximum 0.001;#P inlet 442 34 15 0;#P newex 54 281 73 196617 jit.op @op abs;#P newex 54 258 64 196617 jit.op @op +;#P window linecount 1;#P newex 54 226 108 196617 jit.op @op * @val 0.1;#P newex 54 439 65 196617 jit.op @op *;#P newex 109 417 27 196617 !/ 1.;#P newex 109 394 166 196617 if ($f1>0.) then $f1 else out2 bang;#P newex 109 371 138 196617 * 12.;#P newex 95 338 53 196617 jit.3m;#P newex 54 191 116 196617 jit.noise 1 float32 1 12;#P inlet 178 34 15 0;#P inlet 54 34 15 0;#P outlet 54 489 17 0;#P connect 1 0 3 0;#P fasten 6 1 3 0 270 420 300 420 300 182 59 182;#P connect 3 0 9 0;#P connect 9 0 10 0;#P connect 10 0 11 0;#P connect 11 0 17 0;#P connect 17 0 8 0;#P connect 8 0 0 0;#P connect 17 0 4 0;#P fasten 8 0 10 1 59 469 290 469 290 254 113 254;#P connect 4 1 5 0;#P connect 5 0 6 0;#P connect 6 0 7 0;#P connect 7 0 8 1;#P fasten 13 0 9 1 447 218 157 218;#P connect 2 0 16 0;#P connect 16 0 15 0;#P connect 15 0 14 0;#P connect 14 0 17 1;#P fasten 16 1 14 1 200 105 397 105;#P connect 12 0 13 0;#P pop;#P newobj 129 217 40 196617 p walk;#P window linecount 0;#N vpatcher 65 105 548 494;#P window setfont "Sans Serif" 9.;#P newex 45 191 134 196617 jit.op 1 float32 1 12 @op *;#P newex 217 54 27 196617 t b i;#P window linecount 1;#P newex 217 95 124 196617 jit.matrix 1 float32 1 12;#P newex 217 118 224 196617 jit.expr 1 float32 1 12 @expr "(cell[1])<in[1]";#P window linecount 0;#P newex 45 324 65 196617 jit.op @op *;#P newex 100 297 27 196617 !/ 1.;#P newex 100 274 166 196617 if ($f1>0.) then $f1 else out2 bang;#P newex 100 251 35 196617 * 12.;#P newex 86 226 53 196617 jit.3m;#P newex 45 158 116 196617 jit.noise 1 float32 1 12;#P inlet 217 34 15 0;#P inlet 45 33 15 0;#P outlet 45 346 15 0;#P fasten 6 1 3 0 261 297 277 297 277 147 50 147;#P connect 1 0 3 0;#P connect 3 0 12 0;#P connect 12 0 8 0;#P connect 8 0 0 0;#P fasten 12 0 4 0 50 217 91 217;#P connect 4 1 5 0;#P connect 5 0 6 0;#P connect 6 0 7 0;#P connect 7 0 8 1;#P fasten 9 0 12 1 222 184 174 184;#P connect 2 0 11 0;#P connect 11 0 10 0;#P connect 10 0 9 0;#P fasten 11 1 9 1 239 86 436 86;#P pop;#P newobj 69 217 51 196617 p random;#P newex 106 55 23 196617 t b;#P inlet 368 35 15 0;#P inlet 106 35 15 0;#P outlet 69 296 15 0;#P comment 388 35 87 196617 number of colors;#P comment 234 35 87 196617 mode;#P fasten 11 0 8 0 220 113 74 113;#P fasten 12 0 8 0 256 113 74 113;#P connect 8 0 6 0;#P connect 7 0 2 0;#P connect 6 0 2 0;#P connect 3 0 5 0;#P connect 5 0 8 1;#P fasten 4 0 6 1 373 175 115 175;#P connect 8 1 7 0;#P fasten 4 0 7 1 373 178 149 178;#P fasten 14 0 7 2 501 207 164 207;#P connect 10 0 9 0;#P connect 9 0 11 0;#P connect 9 1 12 0;#P pop;#P newobj 116 226 211 196617 p color_weights;#P fasten 1 6 6 0 523 129 33 129;#P connect 6 0 5 0;#P connect 4 0 9 0;#P connect 5 0 9 0;#P connect 9 0 8 0;#P fasten 1 0 5 1 121 170 56 170;#P connect 5 1 4 0;#P fasten 0 0 5 2 121 249 105 249 105 188 79 188;#P connect 3 0 1 0;#P fasten 5 2 0 0 63 216 121 216;#P fasten 4 1 0 0 216 331 339 331 339 221 121 221;#P lcolor 13;#P connect 0 0 4 1;#P connect 1 1 0 1;#P fasten 1 5 4 2 456 301 216 301;#P connect 1 2 2 0;#P connect 2 0 0 2;#P connect 1 3 0 3;#P connect 1 4 7 0;#P pop;