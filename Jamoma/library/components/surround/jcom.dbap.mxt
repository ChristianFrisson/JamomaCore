max v2;#N vpatcher 197 75 653 419;#P origin 16 0;#P outlet 148 272 15 0;#P window setfont "Sans Serif" 9.;#P newex 148 246 55 196617 zl group 5;#P newex 203 213 83 196617 prepend speaker;#P newex 260 155 40 196617 t dump;#N vpatcher 10 59 407 473;#P origin 0 -6;#P window setfont "Sans Serif" 9.;#P newex 116 126 80 196617 print jcom.dbap;#P newex 116 105 217 196617 if $i1 then List of positions not a multiple of 3;#P newex 116 81 27 196617 % 3;#P newex 50 263 27 196617 t b l;#P newex 50 320 108 196617 zl join;#P newex 50 218 184 196617 t l 0 clear;#N counter 0 0 999;#X flags 0 0;#P newobj 50 294 83 196617 counter 0 0 999;#P newex 50 193 42 196617 zl slice;#P newex 82 105 27 196617 * 3;#P newex 82 81 27 196617 / 3;#P newex 82 56 34 196617 zl len;#P newex 50 242 55 196617 zl group 3;#P comment 97 195 112 196617 get rid of stray values;#P inlet 50 21 15 0;#P outlet 50 358 15 0;#P connect 1 0 7 0;#P connect 7 0 9 0;#P connect 9 0 3 0;#P connect 3 0 11 0;#P connect 11 0 8 0;#P connect 8 0 10 0;#P fasten 9 2 0 0 229 351 55 351;#P connect 10 0 0 0;#P connect 1 0 4 0;#P connect 4 0 5 0;#P connect 5 0 6 0;#P connect 6 0 7 1;#P connect 9 1 8 2;#P fasten 4 0 12 0 87 77 121 77;#P connect 12 0 13 0;#P connect 13 0 14 0;#P fasten 11 1 10 1 72 287 153 287;#P pop;#P newobj 148 155 83 196617 p speaker_setup;#P inlet 36 54 15 0;#P newex 79 54 305 196617 patcherargs @speakers 45. 0. 1. -45. 0. 1. 135. 0. 1. -135. 0. 1.;#P newex 36 116 348 196617 route xyz speakers dump;#P newex 36 197 52 196617 listfunnel;#P outlet 36 272 15 0;#N vpatcher 30 70 499 341;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 165 177 83 196617 vexpr sqrt($f1);#P newex 24 96 114 196617 loadmess scalarmode 1;#P newex 165 154 78 196617 vexpr $f1/$f2;#N vpatcher 20 74 620 474;#P window setfont "Sans Serif" 9.;#P message 101 76 33 196617 set 0;#P newex 50 50 51 196617 t b l b;#P newex 70 75 25 196617 iter;#P newex 50 119 50 196617 accum 0.;#P inlet 50 30 15 0;#P outlet 50 141 15 0;#P connect 1 0 4 0;#P connect 5 0 2 0;#P connect 4 0 2 0;#P connect 2 0 0 0;#P connect 4 1 3 0;#P connect 3 0 2 1;#P connect 4 2 5 0;#P pop;#P newobj 233 130 36 196617 p sum;#P newex 165 98 121 196617 vexpr 1./(pow($f1\\\,4));#P newex 165 70 114 196617 vexpr max($f1\\\,0.01);#P outlet 165 221 15 0;#P inlet 165 36 15 0;#P window linecount 0;#P comment 292 72 151 196617 <- avoid dividing by 0;#P connect 1 0 3 0;#P connect 3 0 4 0;#P connect 4 0 6 0;#P fasten 7 0 6 0 29 135 170 135;#P connect 6 0 8 0;#P connect 8 0 2 0;#P fasten 4 0 5 0 170 122 238 122;#P connect 5 0 6 1;#P pop;#P newobj 36 171 90 196617 p Calculate_levels;#N vpatcher 304 87 606 449;#P window setfont "Sans Serif" 9.;#P window linecount 1;#N vpatcher 20 74 620 474;#P window setfont "Sans Serif" 9.;#P message 101 76 33 196617 set 0;#P newex 50 50 51 196617 t b l b;#P newex 70 75 25 196617 iter;#P newex 50 119 50 196617 accum 0.;#P inlet 50 30 15 0;#P outlet 50 141 15 0;#P connect 1 0 4 0;#P connect 4 0 2 0;#P connect 5 0 2 0;#P connect 2 0 0 0;#P connect 4 1 3 0;#P connect 3 0 2 1;#P connect 4 2 5 0;#P pop;#P newobj 71 195 36 196617 p sum;#P outlet 50 276 15 0;#P inlet 50 47 15 0;#P window linecount 0;#P newex 50 246 67 196617 zl group 256;#P newex 71 219 27 196617 sqrt;#P newex 71 169 79 196617 vexpr $f1*$f1;#P newex 50 78 52 196617 t b dump l;#P newex 71 144 182 196617 vexpr $f1-$f2;#N coll $0_loudspeaker_setup 1;#P newobj 71 117 163 196617 coll $0_loudspeaker_setup 1;#P connect 6 0 2 0;#P connect 2 0 5 0;#P connect 4 0 5 0;#P connect 5 0 7 0;#P connect 2 1 0 0;#P connect 0 0 1 0;#P connect 1 0 3 0;#P connect 3 0 8 0;#P connect 8 0 4 0;#P fasten 2 2 1 1 97 105 248 105;#P pop;#P newobj 36 143 105 196617 p Calculate_distances;#N coll $0_loudspeaker_setup 1;#P newobj 148 184 175 196617 coll $0_loudspeaker_setup 1;#P connect 7 0 5 0;#P fasten 6 1 5 0 379 90 41 90;#P connect 5 0 1 0;#P connect 1 0 2 0;#P connect 2 0 4 0;#P connect 4 0 3 0;#P connect 5 1 8 0;#P fasten 9 0 0 0 265 177 153 177;#P connect 8 0 0 0;#P connect 10 0 11 0;#P connect 0 0 11 0;#P connect 11 0 12 0;#P connect 0 1 10 0;#P connect 5 2 9 0;#P pop;