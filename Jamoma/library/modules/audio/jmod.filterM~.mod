max v2;
#N vpatcher 236 44 867 806;
#P origin 0 54;
#P window setfont "Sans Serif" 9.;
#P comment 177 661 257 196617 Convertion from freq \, gain and q to biquad coeffisients has to take place inside the poly~ (.alg) in case the poly is up- or downsampled.;
#P window linecount 1;
#P newex 458 358 40 196617 t 1 s 0;
#N vpatcher 564 189 1050 519;
#P window setfont "Sans Serif" 9.;
#P window linecount 2;
#P comment 34 260 415 196617 Else "Restore Default Settings" will not function properly as past values for q \, filtergain and cf maintained in FilterGraph will overrule the attempt to reset values to defaults.;
#P outlet 142 194 15 0;
#P outlet 88 194 15 0;
#P outlet 34 194 15 0;
#P window linecount 1;
#P newex 88 157 33 196617 atodb;
#P inlet 179 35 15 0;
#P inlet 125 35 15 0;
#P inlet 71 35 15 0;
#P newex 142 128 47 196617 gate 1 1;
#P newex 88 128 47 196617 gate 1 1;
#P window linecount 0;
#P newex 34 128 47 196617 gate 1 1;
#P inlet 263 35 15 0;
#P comment 34 238 315 196617 Output from FilterFraph has to be muted when filtertype is changes.;
#P connect 1 0 2 0;
#P connect 2 0 9 0;
#P connect 5 0 2 1;
#P connect 1 0 3 0;
#P connect 3 0 8 0;
#P connect 8 0 10 0;
#P connect 6 0 3 1;
#P connect 1 0 4 0;
#P connect 4 0 11 0;
#P connect 7 0 4 1;
#P pop;
#P newobj 34 423 100 196617 p DecodeFilterGraph;
#P window linecount 2;
#P message 94 715 65 196617 \; max refresh;
#P window linecount 1;
#P newex 284 23 124 196617 r $0_xxx_to_filtergraph;
#P newex 177 285 89 196617 pvar FilterType 2;
#P newex 16 691 124 196617 s $0_xxx_to_filtergraph;
#N vpatcher 626 129 1223 458;
#P window setfont "Sans Serif" 9.;
#P window linecount 1;
#P newex 267 143 33 196617 dbtoa;
#P window linecount 0;
#P comment 401 232 119 196617 Set message to 6nd inlet;
#P outlet 96 274 15 0;
#P newex 96 232 215 196617 pak set 1200. 1. 1.;
#P newex 335 119 50 196617 route set;
#P inlet 199 50 15 0;
#P newex 267 119 50 196617 route set;
#P inlet 267 50 15 0;
#P newex 199 119 50 196617 route set;
#P inlet 335 50 15 0;
#P comment 405 121 100 196617 Get rid of set;
#P connect 7 0 8 0;
#P connect 2 0 7 1;
#P connect 1 0 2 0;
#P connect 10 0 7 2;
#P connect 3 0 4 0;
#P connect 4 0 10 0;
#P connect 6 0 7 3;
#P connect 5 0 6 0;
#P pop;
#P newobj 16 667 124 196617 p PrepareForFiltergraph~;
#P newex 177 522 75 196617 pvar FilterGain;
#P newex 177 446 39 196617 pvar Q;
#P newex 21 391 93 196617 pvar FilterGraph 7;
#P newex 177 585 83 196617 pvar CenterFreq;
#P message 105 115 50 196617 /autodoc;
#P window linecount 5;
#P newex 2 144 164 196617 jmod.hub $0_ jmod.filterM~ @size 1U-half @module_type audio @num_inputs 1 @num_outputs 1 @description "Mono 2nd order IIR filter based on biquad~";
#P objectname jmod.hub;
#P window linecount 1;
#P newex 259 235 115 196617 poly~ jmod.filterM~.alg;
#P comment 6 23 41 196617 type;
#B frgb 172 172 172;
#P window linecount 2;
#P message 18 715 72 196617 \; jmod.init bang;
#P window linecount 3;
#P newex 169 144 81 196617 pattrstorage @autorestore 0 @savemode 0;
#X client_rect 0 0 640 240;
#X storage_rect 0 0 640 240;
#P objectname jmod.filterM~;
#P window linecount 2;
#P newex 284 47 271 196617 jmod.message $0_ /filtergraph @description "Messages to filtergraph. See the MSP reference for further details";
#P objectname jmod.parameter.mxb[4];
#P flonum 118 31 40 9 0. 100. 8227 3 198 198 198 221 221 221 222 222 222 0 0 0;
#P objectname Q;
#P newex 177 543 306 196617 jmod.parameter $0_ /filtergain @type msg_float @range -24 24 @clipmode both @ramp 1 @repetitions 0 @description "Gain (dB)";
#P objectname jmod.parameter.mxb;
#P newex 177 468 309 196617 jmod.parameter $0_ /q @type msg_float @ramp 1 @range 0. 100. @clipmode both @repetitions 0 @description "Resonance (Q)";
#P objectname jmod.parameter.mxb[1];
#P newex 177 606 341 196617 jmod.parameter $0_ /cf @type msg_float @range 30. 11025. @clipmode both @ramp 1 @repetitions 0 @description "Center frequency (Hz)";
#P objectname jmod.parameter.mxb[2];
#P user umenu 5 35 70 196647 1 64 51 1;
#X add lowpass;
#X add highpass;
#X add bandpass;
#X add bandstop;
#X add peaknotch;
#X add lowshelf;
#X add highshelf;
#P objectname FilterType;
#P window linecount 1;
#P comment 107 33 27 196617 q;
#B frgb 172 172 172;
#P flonum 118 44 40 9 -24. 24. 8227 3 198 198 198 221 221 221 222 222 222 0 0 0;
#P objectname FilterGain;
#P flonum 118 18 40 9 30. 11025. 8227 3 198 198 198 221 221 221 222 222 222 0 0 0;
#P objectname CenterFreq;
#P comment 103 20 18 196617 cf;
#B frgb 172 172 172;
#P comment 70 46 51 196617 filtergain;
#B frgb 172 172 172;
#P user filtergraph~ 165 20 88 39 3 9 20. 22050. 0.0625 16. 0 1 1 0 0 1 1;
#X frgb 99 99 99;
#X brgb 173 173 173;
#X rgb2 0 0 0;
#X rgb3 84 84 84;
#X rgb4 0 0 0;
#X rgb5 118 121 166;
#X rgb6 122 74 74;
#X rgb7 255 22 22;
#X linmarkers 5512.5 11025. 16537.5;
#X logmarkers 50. 500. 5000.;
#X nfilters 1;
#X setfilter 0 1 1 0 0 1639.273071 1. 1.2 30. 11025. 0.0625 16. 0. 100.;
#X done;
#P objectname FilterGraph;
#P hidden comment 206 80 101 196617 ---signal output---;
#P comment 16 115 79 196617 command input;
#P hidden inlet 24 -21 15 0;
#P hidden comment 23 -35 105 196617 ----signal input----;
#P outlet 2 215 15 0;
#P hidden outlet 245 64 15 0;
#P inlet 2 115 13 0;
#P bpatcher 0 0 255 59 0 0 jmod.gui.mxt 0 $0_;
#P objectname jmod.gui.1Uh.a.mono.mxb;
#P window linecount 3;
#P newex 177 311 291 196617 jmod.parameter $0_ /filtertype @type menu @description "What kind of filter to use. Possible values: lowpass | highpass | bandpass | bandstop | peaknotch | lowshelf | highshelf";
#P objectname jmod.parameter.mxb[3];
#P hidden connect 6 0 1 0;
#P lcolor 6;
#P fasten 26 0 25 0 110 137 7 137;
#P connect 2 0 25 0;
#P connect 25 0 4 0;
#P connect 17 0 31 0;
#P connect 31 0 32 0;
#P fasten 37 1 28 0 478 381 26 381;
#P connect 28 1 36 0;
#P connect 28 2 36 1;
#P connect 18 0 31 1;
#P fasten 37 0 36 3 463 395 129 395;
#P lcolor 1;
#P fasten 37 2 36 3 493 395 129 395;
#P lcolor 1;
#P connect 28 3 36 3;
#P connect 16 0 31 2;
#P connect 21 0 25 1;
#P hidden connect 20 0 9 0;
#P hidden connect 15 1 9 0;
#P connect 25 2 21 0;
#P fasten 0 0 33 0 182 358 171 358 171 281 182 281;
#P fasten 33 1 0 0 261 307 182 307;
#P fasten 17 0 29 0 182 501 170 501 170 441 182 441;
#P connect 36 2 17 0;
#P connect 29 0 17 0;
#P fasten 18 0 30 0 182 577 170 577 170 519 182 519;
#P connect 36 1 18 0;
#P connect 30 0 18 0;
#P fasten 16 0 27 0 182 641 171 641 171 581 182 581;
#P connect 36 0 16 0;
#P connect 27 0 16 0;
#P hidden connect 34 0 9 5;
#P hidden fasten 24 0 1 1 264 258 567 258 567 -8 250 -8;
#P hidden connect 1 1 3 0;
#P fasten 25 1 24 0 84 218 264 218;
#P hidden fasten 1 0 24 0 5 95 264 95;
#P lcolor 6;
#P connect 0 1 37 0;
#P pop;
