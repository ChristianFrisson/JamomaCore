max v2;#N vpatcher 116 44 1091 697;#P origin 0 -29;#P window setfont "Sans Serif" 9.;#P comment 33 174 246 196617 Jamoma's transformation algorithm is well suited for creating more advanced mappings:;#P comment 21 121 301 196617 Create a mapping with an algorithm in between. The algorithm will be scripte in as a Max object \, so any max object will work:;#P window linecount 1;#P comment 8 83 244 196617 Create a mapping from one value to another:;#P hidden newex 461 465 68 196617 loadmess set;#P message 397 488 178 196617 /mouse_menu 0;#P newex 397 465 62 196617 prepend set;#P bpatcher 397 400 255 60 0 0 jmod.mouse.mxt 0 /mouse;#P objectname jmod.mouse.mxt;#P hidden newex 462 582 68 196617 loadmess set;#P message 397 605 178 196617 /midi_normalize 1;#P newex 397 582 62 196617 prepend set;#P bpatcher 397 517 255 60 0 0 jmod.midiin.mxt 0;#P objectname /midi;#P bpatcher 677 245 255 60 0 0 jmod.control.mxt 0 /control;#P objectname /control;#P bpatcher 678 499 255 120 0 0 jmod.output~.mxt 0 /output~;#P objectname /output~;#P bpatcher 678 310 255 120 0 0 jmod.input~.mxt 0 /input~;#P objectname /input~;#P bpatcher 678 434 255 60 0 0 jmod.filter~.mxt 0 /filter~;#P objectname /filter~;#P user panel 666 233 278 395;#X brgb 199 199 214;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P window linecount 2;#P message 419 30 80 196617 \; jcom.init bang;#P window linecount 19;#P user com 28 399 342 196617 420;#K set 0 19809 28784 26990 26483 8291 24942 8289 27763 28448 25189 8301 24932 25888 30569 29800 8308 26725 8226 27753 29556 25966 26990 26402 8294 30062 25460 26991 28218 3341 12590 8259 27753 25451 8303 28192 29800 25888 8781 24944 8294 29295 27938 8308 28519 26476 25888 26990 8308 26725 8301 24944 28773 29216 28015 25717 27749 8308 28448 27753 29556 25966 8294 28530 8308 26725 8310 24940 30053 8308 28448 27753 29556 25966 8294 28530 8232 25902 26414 8308 29305 8308 30066 28265 28263 8303 28192 29800 25888 28015 30067 25888 28015 25717 27749 8308 28448 29800 25888 29289 26472;#K set 100 29737 11808 21621 29294 8308 26725 8308 28519 26476 25888 28518 26144 30568 25966 8313 28533 8296 24950 25888 26223 30062 25632 29800 25888 25455 29298 25955 29728 28769 29281 28005 29797 29230 8205 3378 11808 17260 26979 27424 28526 8308 26725 8226 19809 28704 29807 8736 29807 26471 27749 8297 28192 29800 25888 28001 28784 25970 8301 28516 30060 25902 8276 26725 28192 29541 27749 25460 8308 26725 8304 24946 24941 25972 25970 8313 28533 8311 24942 29728 29807 8291 28526 29810 28524 11296 26223 29216 25976 24941 28780 25888 29800 25888 26990 28789 29728 30319 27765 28005 8303;#K set 200 29216 26217 27764 25970 8291 28517 26214 26979 26981 28276 8297 28192 29800 25888 24949 25705 28448 28015 25717 27749 29472 29807 8308 26725 8306 26983 26740 11808 21615 26471 27749 8303 26214 8297 28192 28001 28784 25970 8301 28516 30060 25888 30568 25966 8313 28533 8296 24950 25888 26223 30062 25632 29800 25888 28769 29281 28005 29797 29216 31087 29984 30561 28276 11808 3341 13102 8271 28788 26991 28257 27756 31008 29817 28773 8297 28192 24942 8289 27751 28530 26996 26733 8308 28448 30067 25900 8294 28530 8293 30817 28016 27749 8226 12064 12846 8736 28530 8226 29539 24940;#K set 300 25888 12334 11569 11808 13360 12320 13616 12336 8736 10340 28526 10100 8308 31088 25888 29800 25888 29045 28532 24948 26991 28192 28001 29291 29472 26990 8308 26725 8289 27751 28530 26996 26733 8311 26990 25711 30508 8303 28268 31008 29800 25888 28271 29293 24940 8301 24952 8301 25971 29537 26469 10542 3341 13358 8259 27753 25451 8226 17266 25953 29797 8301 24944 28777 28263 8717 3381 11808 21608 25888 28001 28784 26990 26400 26995 8291 29285 24948 25956 8289 28260 8291 24942 8290 25888 30313 25975 25956 8297 28192 29800 25888 29797 30836 8311 26990 25711 30510 8276 26725;#K set 400 8301 24944 28777 28263 8311 26988 27680 29556 24946 29728 29807 8311 28530 27424 26989 28005 25705 24948 25964 31022;#K end;#P window linecount 1;#P message 369 154 199 196617 /modify mymapping /exponent_base 1.07;#P window linecount 2;#P message 33 200 263 196617 /create mymapping /analysis/result jalg.transformation.mxt -> /reverb/decay;#P window linecount 4;#P comment 359 82 274 196617 Modify the algorithm that is applied to the data for a named link. This happens by sending the message that follows the link name to the algorithm. Any message that the algorithm object accepts may be sent:;#P window linecount 1;#P comment 438 254 103 196617 Remove all mappings;#P comment 309 351 239 196617 5. the destination for the data as an OSC address;#P comment 309 337 239 196617 4. An arrow (->);#P comment 309 323 239 196617 3. (optional) algorithm to apply to the data;#P comment 309 309 279 196617 2. the source of the data we want to map as an OSC address;#P comment 309 295 239 196617 1. name of the mapping (so we can manage it later);#P message 398 253 39 196617 /clear;#P message 359 135 98 196617 /modify link2 ft1 6;#P message 459 135 81 196617 /modify link2 6;#P message 466 212 75 196617 /remove link2;#P message 8 98 223 196617 /create link1 /mouse/position/y -> /filter~/q;#P message 395 212 69 196617 /remove link;#P message 21 148 267 196617 /create link2 /mouse/position/x * 5000. -> /filter~/cf;#P bpatcher 33 259 255 120 0 0 jmod.mapper.mxt 0 /mapper;#P objectname /mapper;#P window setfont "Sans Serif" 14.;#P comment 674 54 206 196622 js component;#P window setfont "Sans Serif" 10.;#P window linecount 3;#P comment 674 83 240 196618 The mapping engine is actually implemented as a javascript-based scripting component. This component is described in the sub-patcher.;#P window setfont "Sans Serif" 9.;#P window linecount 1;#N vpatcher 245 48 943 480;#P window setfont "Sans Serif" 9.;#P message 463 203 33 196617 clear;#P message 416 169 261 196617 modify /analysis/result + 10. -> /reverb/decay ft1 6;#P message 339 169 75 196617 modify link2 6;#P message 326 149 69 196617 remove link2;#P message 313 131 255 196617 create link2 /analysis/result + 10. -> /reverb/decay;#N thispatcher;#Q end;#P newobj 310 249 61 196617 thispatcher;#P message 293 100 63 196617 remove link;#P message 280 82 222 196617 create link /analysis/result -> /reverb/decay;#P message 408 203 44 196617 compile;#P newex 310 229 100 196617 js jcom.mappings.js;#P newex 50 100 200 196617 jcom.receive jcom.remote.module.from;#P objectname mapping_object_src_0;#P newex 50 180 200 196617 jcom.send jcom.remote.module.to;#P objectname mapping_object_dst_0;#P newex 50 120 200 196617 route /analysis/result;#P objectname mapping_object_route_0;#P newex 50 160 200 196617 prepend /reverb/decay;#P objectname mapping_object_prepend_0;#P newex 50 140 200 196617 + 10.;#P objectname mapping_object_alg_0;#P connect 4 0 2 0;#P connect 2 0 0 0;#P connect 0 0 1 0;#P connect 1 0 3 0;#P connect 14 0 5 0;#P connect 13 0 5 0;#P connect 12 0 5 0;#P connect 10 0 5 0;#P connect 11 0 5 0;#P connect 6 0 5 0;#P connect 7 0 5 0;#P connect 8 0 5 0;#P connect 5 0 9 0;#P pop;#P newobj 760 130 79 196617 p js-component;#P comment 16 47 313 196617 manage parameter mappings for jamoma modules;#B frgb 255 255 255;#P window setfont "Sans Serif" 18.;#P comment 16 19 313 196626 jmod.mapper;#B frgb 255 255 255;#P user panel 4 6 403 65;#X brgb 67 65 107;#X frgb 128 11 10;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 669 51 255 27;#X brgb 230 214 144;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 669 80 255 73;#X brgb 254 241 180;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P window setfont "Sans Serif" 9.;#P comment 296 281 249 196617 Arguments for mappings:;#P window linecount 2;#P comment 387 184 155 196617 Remove a mapping by providing its name as an argument:;#P user panel 391 394 267 234;#X brgb 199 199 214;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P fasten 27 0 11 0 374 245 38 245;#P hidden fasten 18 0 11 0 403 245 38 245;#P fasten 14 0 11 0 13 250 38 250;#P fasten 12 0 11 0 26 238 38 238;#P fasten 13 0 11 0 400 245 38 245;#P fasten 15 0 11 0 471 245 38 245;#P fasten 17 0 11 0 364 245 38 245;#P hidden fasten 16 0 11 0 464 245 38 245;#P fasten 26 0 11 0 38 218 38 218;#P connect 39 0 40 0;#P connect 40 0 41 0;#P hidden fasten 42 0 41 0 466 485 402 485;#P connect 35 0 36 0;#P hidden fasten 38 0 37 0 467 602 402 602;#P connect 36 0 37 0;#P connect 32 1 31 1;#P connect 31 1 33 1;#P connect 32 2 31 2;#P connect 31 2 33 2;#P pop;