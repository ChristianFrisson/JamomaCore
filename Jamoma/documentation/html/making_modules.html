<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
	<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1">
	<title>Making Your Own Audio Module: A Recipe</title>
	<link href="styles/jamoma.css" rel="stylesheet" type="text/css">
</head>

<body>
	<div id="jcom_header">
	<img src="../images/jmod.icon.mod.png" width="128" height="128">
	<h1>jamoma recipe: make your own audio module </h1>
	<h2>a step-by-step tutorial for creating modules </h2>

	<h6><a href="../index.html">Table of Contents</a> | <a href="../modules/">Index of Modules</a> | <a href="http://jamoma.org/">Jamoma.org</a></h6>
</div>
	<h3>Ingredients</h3>
		<ul>
			<li>jcom.gui (bpatcher)
			<li>jcom.hub
			<li>jcom.parameter(s) and eventually jcom.message(s) and jcom.return(s)
			<li>poly~
		</ul>
		<h3>Step 1: Develop an algorithm</h3>
		<p>Audio modules will typically have the actual audio calculations encapsulated in MSP's poly~ object. The poly~ object loads a patcher into itself and then provides a number of services for that patch.  These services include muting, downsampling, and polyphonic voice management.  In Jamoma, we refer to the patch that you will load into the poly~ as your module's algorithm.</p>
		<p>Your algorithm will need inlets and outlets for each audio signal that it will send and receive. The first inlet should double as a way to get control messages into the module.  These control messages will consist of a parameter name followed by one or more arguments.  You can use Max's standard route object to strip off the paramater name and get the actual incoming values from that parameter.  </p>
		<p>To adhere to the Jamoma Guidelines, this patch should be saved in text format and have a prefix of jalg. and an extension of &quot;.mxt&quot;.</p>
		<h3>Step 2: Assemble your module</h3>
		<p>You should have a look first at the template patches and/or to the tutorials..</p>
		<p>The audio module itself will be a Max patch, also saved in text format but with a prefix of jmod. (and an extension of &quot;.mxt&quot;).  Create the new patcher, and then follow these steps:</p>
		<ol>
			<li>Create an inlet for control input, and additional inlet(s) for audio signals.
			<li>Create an outlet for control output, and additional outlet(s) for audio signals.
			<li>Instantiate a jcom.hub object.  The first argument should be the name of the module (without the file extension).  Connect the first inlet to the left-most inlet object in your patch.  Connect the first outlet to the left-most outlet object in your patch.
			<li>Instantiate a bpatcher object. Load the jcom.gui patch that most closely matches your needs in both terms of UI size and the number of audio channels. 
			<li>Create a jcom.in (jcom.in~ for audio signals) with the number of inlets of your patcher as argument. Create a jcom.out (jcom.out~ for audio signals) with the number of of outlets of your patcher as argument.
			<li>Connect the outlet(s) of jcom.out(~) object to the last outlet object(s) in your patcher.  Connect the last inlet object(s) in your patcher to the inlet(s) of jcom.in(~) object.
			<li>Instantiate a jcom.parameter object for each parameter that you enabled your algorithm patch to receive.  Connect these to ui widgets (i.e. number boxes or sliders) in the same way you would use the pp object for creating plugins.
			<li>Instantiate a poly~ object with the name of your algorithm patch as an argument.   Connect the first outlet(s) of the jcom.in(~) to the inlet(s) of the poly~, and the next to rightmost to the poly~ leftmost inlet.  Connect the outlet(s) of the poly~ to the inlet(s) of jcom.out(~).
			<li>Instantiate a pattrstorage object.  Connect it to the last inlet and outlet of the jcom.hub.
		</ol>
		<p> It is probably helpful to be looking at a simple module such as the degrade~ module as a template.</p>
		<h3>Step 3: Create default preset</h3>
		<p>You should do this.  More coming soon...</p>
		<h3>Step 4: Write the documentation</h3>
		<p>Write an HTML file names as your module's name (the arg to the jcom.hub) with a .html extension.</p>
		<p></p>
	</body>

</html>