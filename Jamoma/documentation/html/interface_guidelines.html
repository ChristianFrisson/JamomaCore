<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
<meta http-equiv="content-type" content="text/html;charset=ISO-8859-1">
<title>JIG: Jamoma Interface Guidelines &amp; Module Specification</title>
<link href="styles/jamoma.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
-->
</style>
</head>

<body>
	<div id="jmod_header">
	<img src="../images/jmod.icon.mod.png" width="128" height="128">
	<h1>jig</h1>
	<h2>jamoma interface guidelines &amp; module specification </h2>

	<h6><a href="index.html">Table of Contents</a> | <a href="modules/">Index of Modules</a> | <a href="http://jamoma.org/">Jamoma.org</a></h6>
</div>


		<h3>Overview</h3>
		<p>Jamoma is a specification for the structuring of patches in Cycling '74's Max.  By structuring patches according to these guidelines, users can be assured that patches become freely interchangeable components (modules) in the Max environment.  This document presents the guidelines to which patches should be structured to ensure compatibility.</p>
		
<p>In addition to presenting the guidelines, an implementation of these guidelines 
  is also provided. The provided framework should be sufficient for most users 
  of Jamoma, and will ease the development of modules. The provided framework, 
  however, is just one of many possible implementations of these guidelines.</p>
<h3>File Name and Format</h3>
<p>All module filenames should end with the &#147;<code>.mod</code>&#148; extension, 
  and should be saved in Max&#146;s text format. Similarly, all algorithms should 
  end with &#147;<code>.alg</code>&#148; extension and be saved in Max&#146;s 
  text format. Other underlying patches or abstractions should also be saved in 
  text format. The preferred extensions for text format files (with the exception 
  of .mod or .alg files) is <code> .txt</code> or <code>.mxt</code>.</p>
<p>If there is a situation where a binary format patcher must be used, the preferred 
  extension for binary Max patches is <code>.mxb</code>.</p>
<p>The preferred format for graphics files in the Portable Network Graphics (PNG) 
  format.</p>
<p>All files coming as part of the standard Jamoma distribution should share the 
  <code>jmod.</code> prefix. Tilde (<code>~</code>) is used to indicate a audio 
  module or algorithm: <code>jmod.myaudiomodule~.mod</code> and <code>jmod.myaudioalgorithm~.alg</code>. 
  Percentage sign is used to indicate a video module or algorithm: <code>jmod.myvideomodule%.mod</code> 
  and <code>jmod.myvideoalgorithm%.alg</code>.</p>
<h3>The structure of the modules</h3>
<p>Jamoma is modular. All parts of the Jamoma system are to be implemented as 
  modules: Self-contained components of a system, with a well-defined interface 
  to the other components. Each module consists of three functional elements: 
</p>
<ul>
  <li><em>Graphical User Interface (GUI):</em> The part of the module providing 
    a graphical interface to the module, providing visual feedback and interaction 
    with the module.</li>
  <li><em>Communication and state handling system</em>: The parts of the module 
    keeping track of the current state of the module, as well as communication 
    with the rest of the Jamoma and Max environment. This include dealing with 
    incoming messages and paramater changes, communication with the GUI and the 
    algorithm, as well as keeping track of current state so that it is setable 
    and getable.</li>
  <li><em>Algorithm:</em> The part of the module where the logical algorithm is 
    carried out.</li>
</ul>
<h3>User Interface: Dimensions</h3>
<p>User interface dimensions are based on the paradigm of conventional rack mount 
  hardware. To demonstrate this, the width a &#147;1U&#148; module is 510 pixels. 
  Thus the width of a half rack unit module is 255 pixels. The width of 510 pixels 
  was chosen to maximize the number of modules that can fit on a monitor with 
  a resolution 1024 pixels wide.</p>
<p>The height of a 1U module is 60 pixels. Heights then, must be a multiple of 
  60 pixels high. The size of a module&#146;s interface must follow these guidelines. 
  Furthermore, the size of the module should be accessible to the host patch so 
  that it may query the module about this. </p>
<p>The chart below shows the dimensions of the most common module sizes. </p>
<table class="smallTable">
  <tr class="tableHeading2"> 
    <td>Module Size</td>
    <td>Width</td>
    <td>Height</td>
  </tr>
  <tr> 
    <td class="instructionName">1U-half</td>
    <td class="instructionType">255</td>
    <td class="instructionDescription">60</td>
  </tr>
  <tr> 
    <td class="instructionName">1U</td>
    <td class="instructionType">510</td>
    <td class="instructionDescription">60</td>
  </tr>
  <tr> 
    <td class="instructionName">2U-half</td>
    <td class="instructionType">255</td>
    <td class="instructionDescription">120</td>
  </tr>
  <tr> 
    <td class="instructionName">2U</td>
    <td class="instructionType">510</td>
    <td class="instructionDescription">120</td>
  </tr>
  <tr> 
    <td class="instructionName">3U-half</td>
    <td class="instructionType">255</td>
    <td class="instructionDescription">180</td>
  </tr>
  <tr> 
    <td class="instructionName">3U</td>
    <td class="instructionType">510</td>
    <td class="instructionDescription">180</td>
  </tr>
</table>
<p>Modules may be made which are taller that those in this table, provided they 
  follow the same convention.</p>
<h3>User Interface: Features</h3>
<p>The user interface may be designed according to the desires and whims of the 
  developer. To maximize the experience of a user, however, it is ideal to remain 
  somewhat consistent with the conventions established by the example modules 
  that are included with the canonical Jamoma package. The framework provided 
  by the Jamoma developers is "skinnable" - meaning that you can provide custom 
  graphics files and then simply set a skin name as an attribute to the jmod.hub 
  object.</p>
<h3>OpenSoundControl (OSC) compatibility</h3>
<p>Jamoma is implemented according to the <a href="http://www.opensoundcontrol.org">OpenSoundControl 
  (OSC)</a> protocol. OSC's advantages include interoperability, accuracy, flexibility, 
  and enhanced organization and documentation. All communication to and from Jamoma 
  modules thus take the form of OSC messages, utilising URL-style address patterns.</p>
<p></p>
<p> According to the OSC specification, the following printable ASCII characters 
  are not allowed in the names of modules, messages or parameters: </p>


<table class="smallTable">
  <caption align="bottom">
  Printable ASCII characters not allowed in names of OSC Methods or OSC Containers 
  </caption>

<tbody>
    <tr class="tableHeading2"> 
      <td> character </td>
      <td> name<b> </b> </td>
      <td> ASCII code (decimal) </td>
</tr>
<tr>
      <td class="instructionName"> ' ' </td>
      <td class="instructionType"> space </td>
      <td class="instructionDescription"> 32 </td>
</tr>
<tr>
      <td class="instructionName"> # </td>
      <td class="instructionType"> number sign </td>
      <td class="instructionDescription"> 35 </td>
</tr>
<tr>
      <td class="instructionName"> * </td>
      <td class="instructionType"> asterisk </td>
      <td class="instructionDescription"> 42 </td>
</tr>
<tr>
      <td class="instructionName"> , </td>
      <td class="instructionType"> comma </td>
      <td class="instructionDescription"> 44 </td>
</tr>
<tr>
      <td class="instructionName"> / </td>
      <td class="instructionType"> forward slash </td>
      <td class="instructionDescription"> 47 </td>
</tr>
<tr>
      <td height="17" class="instructionName"> ? </td>
      <td height="17" class="instructionType"> question mark </td>
      <td height="17" class="instructionDescription"> 63 </td>
</tr>
<tr>
      <td height="17" class="instructionName"> [ </td>
      <td height="17" class="instructionType"> open bracket </td>
      <td height="17" class="instructionDescription"> 91 </td>
</tr>
<tr>
      <td class="instructionName"> ] </td>
      <td class="instructionType"> close bracket </td>
      <td class="instructionDescription"> 93 </td>
</tr>
<tr>
      <td class="instructionName"> { </td>
      <td class="instructionType"> open curly brace </td>
      <td class="instructionDescription"> 123 </td>
</tr>
<tr>
      <td class="instructionName"> } </td>
      <td class="instructionType"> close curly brace </td>
      <td class="instructionDescription"> 125 </td>
</tr>
</tbody>
</table>
<p>Jamoma do not currently support the more advanced pattern matching of OSC utilising 
  &quot;<code>?</code>, &quot;<code>*</code>&quot;, string of characters in square 
  brackets or comma-separated list of strings enclosed in curly braces.</p>
<p>For more details on OSC, please refer to <a href="http://www.opensoundcontrol.org/spec-1_0">The 
  Open Sound Control Specification</a>.</p>
<h3>Standardized Messages and Parameters</h3>
<p>To control a module you will need to pass data to it. All control data is passed 
  in via the first inlet. Internally this data is passed to a named data receiver. 
  The data receivers can be either <code>parameters</code> or <code>messages</code>.</p>
<p>A message is for stateless operations or triggers. For example, in Max a 'bang' 
  is a stateless operation in that it does not really store the state of its value.</p>
<p>Conversely, the standard toggle object has a state: it is either on or off. 
  This would be an example of a parameter. Parameters in Jamoma can both have 
  their value set, and can also be queried to return their value (the value is 
  returned via the first outlet of the module).</p>
<p>All modules should return their parameter values as they are updated through 
  the <code>feedback</code> outlet (first outlet) as just mentioned. Using the 
  provided Jamoma framework, this happens automatically for all parameters. Messages, 
  because they have no state may or may not return a message. The feedback outlet 
  also may return other control messages as needed (such as the results of a pitch-tracker 
  analyses or a flag for when a file is done playing).</p>
<p>A number of standardised parameters and messages are recommended for various 
  types of modules.</p>
<p>&nbsp;</p>
<h4>All modules</h4>
<p>All modules should, where feasible, implement the following <code>parameters</code>:</p>
<table>
  <tr class="tableHeading2"> 
    <td> Parameter Name </td>
    <td> Type </td>
    <td> Range </td>
    <td> Clipmode </td>
    <td> Ramp Enabled </td>
    <td> Repetitions </td>
    <td> Description </td>
  </tr>
  <tr> 
    <td class="instructionName"> /disable_ui_updates </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Turn off the updating of user interface 
      elements when parameters change. This may be done to conserve CPU resources. 
    </td>
  </tr>
  <tr> 
    <td class="instructionName"> /set_clock </td>
    <td class="instructionType"> msg_symbol </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Sync module to external clock. <br> <code>/set_clock 
      max</code> set module to use the Max scheduler (default behaviour). </td>
  </tr>
</table>
<p>&nbsp;</p><p>All modules should, where feasible, implement the following <code>messages</code>:</p>
<table>
  <tr class="tableHeading2"> 
    <td> Message Name </td>
    <td> Type </td>
    <td> Range </td>
    <td> Clipmode </td>
    <td> Ramp Enabled </td>
    <td> Repetitions </td>
    <td> Description </td>
  </tr>
  <tr> 
    <td class="instructionName">/autodoc</td>
    <td class="instructionType">n/a</td>
    <td class="instructionRange">N/a</td>
    <td class="instructionClipmode">n/a</td>
    <td class="instructionRamp">n/a</td>
    <td class="instructionRepetitions">yes</td>
    <td class="instructionDescription">Auto-generate html documentation for the 
      module. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /get_parameter_names </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> n/a </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Returns a dump of symbols out the feedback 
      outlet with the names of parameters accessible in this module.</td>
  </tr>
  <tr> 
    <td class="instructionName"> /help </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> n/a </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Open the online html reference for this 
      module.</td>
  </tr>
  <tr> 
    <td class="instructionName"> /load_settings </td>
    <td class="instructionType"> msg_symbol</td>
    <td class="instructionRange"> n/a </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Open an xml-preset file and recall the 
      first preset in that file. An optional argument defines the file to open.</td>
  </tr>
  <tr> 
    <td class="instructionName"> /preset_recall </td>
    <td class="instructionType"> msg_int</td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Recall a preset by number - you can also 
      choose presets from the module menu.</td>
  </tr>
  <tr> 
    <td class="instructionName"> /restore_defaults </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> n/a </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Open the default preset file and recall 
      the first preset in that file. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /save_settings </td>
    <td class="instructionType"> msg_symbol </td>
    <td class="instructionRange"> n/a </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Write an xml-preset file to disk. An optional 
      argument defines the file to open.</td>
  </tr>
  <tr> 
    <td class="instructionName"> /set_clock </td>
    <td class="instructionType"> msg_symbol </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Sync module to external clock. <br> <code>/set_clock 
      max</code> set module to use the Max scheduler (default behaviour). </td>
  </tr>
  <tr> 
    <td class="instructionName"> /view_internals </td>
    <td class="instructionType"> n/a </td>
    <td class="instructionRange"> n/a </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Attempts to open the internal algorithm 
      for viewing. This works for most modules. Some modules may choose to cloak 
      the algorithms - preventing this message from functioning.</td>
  </tr>
</table>
<p>&nbsp;</p><h4>Audio modules</h4>
<p>All audio modules should, where feasible, implement these <code>parameters</code>, 
  in addition to those above:</p>
<table>
  <tr class="tableHeading2"> 
    <td> Parameter Name </td>
    <td> Type </td>
    <td> Range </td>
    <td> Clipmode </td>
    <td> Ramp Enabled </td>
    <td> Repetitions </td>
    <td> Description </td>
  </tr>
  <tr> 
    <td class="instructionName"> /bypass </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> When active, this attribute bypasses the 
      module's processing algorithm, letting audio pass through unaffected. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /defeat_meters </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> When active, this attribute turns off 
      the signal level meters in the module to conserve CPU. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /gain/midi </td>
    <td class="instructionType"> msg_float </td>
    <td class="instructionRange"> 0 158 </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> yes </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Set gain as MIDI value. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /mix </td>
    <td class="instructionType"> msg_float </td>
    <td class="instructionRange"> 0 100 </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> yes </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Controls the wet/dry mix of the module's 
      processing routine in percent. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /mute </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> When active, this attribute turns off 
      the module's processing algorithm to save CPU </td>
  </tr>
  <tr> 
    <td class="instructionName"> /sr </td>
    <td class="instructionType"> msg_int </td>
    <td class="instructionRange"> -2 0 </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> no </td>
    <td class="instructionDescription"> Sets the relative sample-rate for this 
      module. </td>
  </tr>
</table>
<p>&nbsp;</p>
<p>All audio modules should also, where feasible, also implement these <code>messages</code>:</p>
<table>
  <tr class="tableHeading2"> 
    <td> Message Name </td>
    <td> Type </td>
    <td> Range </td>
    <td> Clipmode </td>
    <td> Ramp Enabled </td>
    <td> Repetitions </td>
    <td> Description </td>
  </tr>
  <tr> 
    <td class="instructionName"> /clear_meters </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> no info provided </td>
  </tr>
  <tr> 
    <td class="instructionName"> /gain </td>
    <td class="instructionType"> msg_float </td>
    <td class="instructionRange"> -144 0 </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> yes </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Set gain as dB value. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /gain/dec </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> N/A </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Increase gain MIDI value by one. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /gain/inc </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> N/A </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Decrease gain MIDI value by one. </td>
  </tr>
</table>
<p>&nbsp;</p><h4>Video modules</h4>
<p>All jitter-based video modules should, where feasible, implement these <code>parameters</code>, 
  in addition to those above:</p>
<table>
  <tr class="tableHeading2"> 
    <td> Parameter Name </td>
    <td> Type </td>
    <td> Range </td>
    <td> Clipmode </td>
    <td> Ramp Enabled </td>
    <td> Repetitions </td>
    <td> Description </td>
  </tr>
  <tr> 
    <td class="instructionName"> /bypass </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Bypasses the video processing algorithm 
      in the module - allowing unaltered video through. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /freeze </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Freezes the last frame of output from 
      the module's processing algorithm. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /mute </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Mutes (turns off) the module's algorithm 
      - generating no output. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /preview </td>
    <td class="instructionType"> toggle </td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> none </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Turns on/off the video display in the 
      module's preview window. </td>
  </tr>
</table>
<p>&nbsp;</p>
<p>All jitter-based video modules should, where feasible, implement these <code>messages</code>, 
  in addition to those above:</p>
<table>
  <tr class="tableHeading2"> 
    <td> Message Name </td>
    <td> Type </td>
    <td> Range </td>
    <td> Clipmode </td>
    <td> Ramp Enabled </td>
    <td> Repetitions </td>
    <td> Description </td>
  </tr>
  <tr> 
    <td class="instructionName"> /direct </td>
    <td class="instructionType"> generic</td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Send messages directly to the jitter external(s) 
      embedded in the module. </td>
  </tr>
  <tr> 
    <td class="instructionName"> /genframe </td>
    <td class="instructionType"> n/a</td>
    <td class="instructionRange"> default </td>
    <td class="instructionClipmode"> both </td>
    <td class="instructionRamp"> no </td>
    <td class="instructionRepetitions"> yes </td>
    <td class="instructionDescription"> Forces a frame of output to be sent. </td>
  </tr>
</table>
<h3>Reserved Syntax and Messages</h3>
		
<p>No module may accept or use the following:</p>
		
<ul>
  <li>Any message beginning with &quot;<code>jmod.</code>&quot;. These messages 
    are reserved for internal communicatin within and between the modules. Specifically, 
    the following messages are currently being used: 
    <ul>
      <li><code>jmod.init (bang)</code>: Initialisation of all modules</li>
      <li><code>jmod.dsp.off (bang)</code>: Can be used for a quick fade-out when 
        audio is turned of.</li>
      <li><code>jmod.remote.toModule</code>: Used for wireless communication from 
        <code>jmod.cuescript.mod</code> to all other modules.</li>
      <li><code>jmod.remote.fromModule</code>: Used for wireless communication 
        from all Jamoma modules to <code>jmod.cuescript.mod</code>.</li>
    </ul>
  <li>Any standard message, as previously defined, in a way that differs from 
    the way defined in these guidelines. 
</ul>
<p>Inside modules there might be local wireless communcation set up between different 
  parts of the module using <code>send</code>/<code>receive</code> pairs with 
  arguments starting with &quot;<code>#0_</code>&quot;. To avoid conflicts with 
  existing communication, it is recommended that local <code>send</code>/<code>receive</code> 
  pairs starts of with &quot;<code>#0_xxx_</code>&quot;. Refer to <code>jmod.input~.mod</code> 
  for an example on this.</p>
</body>

</html>
