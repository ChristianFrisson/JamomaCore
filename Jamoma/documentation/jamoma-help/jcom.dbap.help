max v2;#N vpatcher 11 53 755 571;#P origin 16 0;#P window setfont "Sans Serif" 9.;#P comment 15 150 401 196617 The basic idea of dbap is that the sum of all intensities is constant.;#P comment 699 389 27 196617 0;#P comment 699 351 27 196617 1;#P comment 699 461 27 196617 -48;#P user multiSlider 478 423 220 50 -48. 0. 16 2937 15 0 0 2 2 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 91 52 37;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P comment 478 474 123 196617 volume (dB);#N vpatcher 10 59 610 459;#P outlet 123 156 15 0;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P newex 174 89 34 196617 atodb;#P window linecount 1;#P newex 123 112 61 196617 pack 0 0.;#P newex 123 89 27 196617 + 1;#P newex 123 69 61 196617 unpack 0 0.;#P newex 123 135 62 196617 prepend set;#P newex 50 111 61 196617 pack 0 0.;#P newex 50 89 27 196617 + 1;#P newex 50 68 61 196617 unpack 0 0.;#P newex 50 134 62 196617 prepend set;#P inlet 50 30 15 0;#P outlet 50 156 15 0;#P connect 1 0 3 0;#P connect 3 0 4 0;#P connect 4 0 5 0;#P connect 5 0 2 0;#P connect 2 0 0 0;#P connect 3 1 5 1;#P connect 1 0 7 0;#P connect 7 0 8 0;#P connect 8 0 9 0;#P connect 9 0 6 0;#P connect 6 0 11 0;#P connect 7 1 10 0;#P connect 10 0 9 1;#P pop;#P hidden newobj 507 305 50 196617 p display;#P user multiSlider 478 351 220 50 0. 1. 16 2937 15 0 0 2 2 0 0;#M frgb 0 0 0;#M brgb 255 255 255;#M rgb2 127 127 127;#M rgb3 0 0 0;#M rgb4 37 52 91;#M rgb5 74 105 182;#M rgb6 112 158 18;#M rgb7 149 211 110;#M rgb8 187 9 201;#M rgb9 224 62 37;#M rgb10 7 114 128;#P message 523 242 104 196617 xyz 7.5 1.2 0.;#P hidden newex 478 261 62 196617 prepend set;#P hidden newex 119 495 64 196617 prepend help;#P hidden newex 119 515 45 196617 pcontrol;#P message 119 462 73 196617 jcom.xyz2aed;#P message 43 462 73 196617 jcom.aed2xyz;#P comment 100 119 254 196617 dump all pseaker positions from right outlet;#P comment 38 119 57 196617 dump:;#P comment 100 105 254 196617 position of sound source;#P comment 38 105 57 196617 xyz:;#P comment 100 91 254 196617 list of positions as cartecian coordinates;#P newex 583 305 58 196617 print dump;#N vpatcher 20 74 448 320;#P window setfont "Sans Serif" 9.;#P window linecount 0;#P newex 50 75 50 196617 deferlow;#P window linecount 3;#P message 50 104 301 196617 speakers 0.5 8.5 0. 0.5 14.5 0. 12.5 14.5 0. 12.5 8.5 0. 17. 6. 0. 21.5 4.5 0. 21.5 0.5 0. 16.5 0.5 0. 11.5 0.5 0. 11.5 4.5 0. 10.5 4.5 0. 10.5 0.5 0. 5.5 0.5 0. 0.5 0.5 0. 0.5 4.5 0. 5. 7.5 0.;#P window linecount 1;#P newex 50 50 48 196617 loadbang;#P outlet 50 174 15 0;#P connect 1 0 3 0;#P connect 3 0 2 0;#P connect 2 0 0 0;#P pop;#P newobj 452 30 42 196617 p setup;#P window setfont "Sans Serif" 18.;#P comment 15 16 145 196626 jcom.dbap;#B frgb 255 255 255;#P window setfont "Sans Serif" 9.;#P comment 15 41 292 196617 distance based amplitude panning;#B frgb 255 255 255;#P user panel 10 11 400 50;#X brgb 67 65 107;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#N vpatcher 40 55 260 337;#P window setfont "Sans Serif" 9.;#P newex 59 181 65 196617 prepend xyz;#P newex 59 153 107 196617 pack 0. 0. 0.;#P window linecount 1;#P newex 107 127 34 196617 + 15.;#P newex 107 105 40 196617 * -0.1;#P window linecount 0;#P newex 59 105 35 196617 * 0.1;#P newex 59 77 58 196617 unpack 0 0;#P outlet 59 215 15 0;#P inlet 59 58 15 0;#P connect 0 0 2 0;#P connect 2 0 3 0;#P connect 3 0 6 0;#P connect 6 0 7 0;#P connect 7 0 1 0;#P connect 2 1 4 0;#P connect 4 0 5 0;#P connect 5 0 6 1;#P pop;#P newobj 478 241 44 196617 p scaler;#N vpatcher 347 204 1158 622;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P newex 145 278 97 196617 loadmess -3 -3 3 3;#P newex 63 278 78 196617 vexpr $f1+$f2;#P newex 145 227 81 196617 loadmess 0 150;#P newex 63 227 78 196617 vexpr $f1+$f2;#P window linecount 0;#P newex 145 199 92 196617 loadmess 10. -10.;#P newex 63 199 79 196617 vexpr $f1*$f2;#P newex 647 91 44 196617 qlim 20;#P newex 647 126 136 196617 prepend drawsprite position;#P inlet 647 54 15 0;#P window linecount 5;#P message 269 184 93 196617 enablesprites 1 \, recordsprite \, paintoval -5 -5 5 5 28 \, closesprite position;#P window linecount 0;#P newex 63 176 51 196617 zl slice 2;#P newex 63 134 55 196617 zl group 3;#P newex 63 113 77 196617 route speakers;#P newex 63 63 27 196617 t l b;#P inlet 63 33 15 0;#P message 365 184 165 196617 paintrect 135 0 250 65 0 0 0 \, paintrect 0 98 60 100 0 0 0 \, paintrect 45 68 105 70 0 0 0 \, paintrect 109 100 111 150 0 0 0 \, paintrect 109 98 170 100 \, local 0;#P message 535 184 68 196617 clear \, local 0;#P outlet 63 353 15 0;#P message 63 316 165 196617 paintoval \$1 \$2 \$3 \$4 66 189 240;#P message 63 255 65 196617 \$1 \$2 \$1 \$2;#P connect 5 0 6 0;#P connect 6 0 7 0;#P connect 7 0 8 0;#P connect 8 0 9 0;#P connect 9 0 14 0;#P connect 14 0 16 0;#P connect 16 0 0 0;#P connect 0 0 18 0;#P connect 18 0 1 0;#P fasten 3 0 2 0 540 342 68 342;#P connect 1 0 2 0;#P fasten 4 0 2 0 370 342 68 342;#P fasten 10 0 2 0 274 342 68 342;#P fasten 12 0 2 0 652 342 68 342;#P connect 17 0 16 1;#P connect 19 0 18 1;#P connect 15 0 14 1;#P fasten 6 1 10 0 85 94 274 94;#P fasten 6 1 4 0 85 94 370 94;#P fasten 6 1 3 0 85 94 540 94;#P connect 11 0 13 0;#P connect 13 0 12 0;#P pop;#P newobj 478 57 55 196617 p DrawLCD;#P message 50 344 27 196617 stop;#P message 12 326 65 196617 startwindow;#P newex 94 377 215 196617 dac~ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16;#P newex 94 314 222 196617 matrix~ 1 16 0.;#P newex 452 305 52 196617 prepend 0;#P user lcd 478 81 220 150 0 1 0 0 1;#P newex 94 259 39 196617 *~ 0.2;#P newex 452 280 141 196617 jcom.dbap;#P comment 162 239 183 196617 Click in LCD display to position source;#P newex 94 237 65 196617 phasor~ 440;#P comment 15 72 100 196617 Input:;#P comment 38 91 57 196617 speakers:;#P comment 15 443 55 196617 See also:;#P window linecount 2;#P comment 15 167 401 196617 The dbap technique only depends on the relative positions of the speakers \, so you can define origin of the coordinate system anywhere you find convinient.;#P window linecount 1;#P comment 478 402 123 196617 volume (linear);#P comment 699 423 27 196617 0;#P connect 6 0 9 0;#P fasten 11 0 12 0 457 326 382 326 382 308 99 308;#P connect 9 0 12 0;#P connect 12 0 13 0;#P fasten 14 0 13 0 17 370 99 370;#P fasten 15 0 13 0 55 370 99 370;#P connect 12 1 13 1;#P hidden fasten 29 0 31 0 124 486 124 486;#P hidden fasten 28 0 31 0 48 486 124 486;#P hidden connect 31 0 30 0;#P connect 12 2 13 2;#P connect 12 3 13 3;#P connect 12 4 13 4;#P connect 12 5 13 5;#P connect 12 6 13 6;#P connect 12 7 13 7;#P connect 12 8 13 8;#P connect 12 9 13 9;#P connect 12 10 13 10;#P connect 12 11 13 11;#P connect 12 12 13 12;#P connect 12 13 13 13;#P connect 12 14 13 14;#P connect 12 15 13 15;#P connect 21 0 8 0;#P connect 17 0 8 0;#P connect 8 0 11 0;#P connect 21 0 16 0;#P connect 16 0 10 0;#P connect 10 0 17 0;#P hidden connect 17 0 32 0;#P hidden fasten 35 0 34 0 512 329 483 329;#P hidden connect 35 1 37 0;#P hidden fasten 8 0 35 0 457 301 512 301;#P fasten 10 0 16 1 483 236 706 236 706 52 528 52;#P lcolor 1;#P hidden connect 32 0 33 0;#P connect 8 1 22 0;#P pop;