<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Jamoma: /Users/tim/dev/Jamoma/SourceCode/ThirdParty/ttblue/dsplib/tt_audio_base.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>/Users/tim/dev/Jamoma/SourceCode/ThirdParty/ttblue/dsplib/tt_audio_base.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// taptools base file</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="preprocessor">#include "tt_audio_base.h"</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="comment">// GLOBALS (CLASS STATICS)</span>
<a name="l00006"></a>00006 <span class="keywordtype">int</span> tt_audio_base::global_sr = 44100;                                           <span class="comment">// Global Sample Rate</span>
<a name="l00007"></a>00007 <span class="keywordtype">int</span> tt_audio_base::global_vectorsize = 64;                                      <span class="comment">// Global Vector Size</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="keyword">const</span> <span class="keywordtype">double</span> tt_audio_base::pi = 3.1415926535897932;            <span class="comment">// pi</span>
<a name="l00010"></a>00010 <span class="keyword">const</span> <span class="keywordtype">double</span> tt_audio_base::twopi = 6.2831853071795864; <span class="comment">// 2 * pi</span>
<a name="l00011"></a>00011 <span class="keyword">const</span> <span class="keywordtype">double</span> tt_audio_base::anti_denormal_value = 1e-18;        <span class="comment">// used by tt_audio_base::anti_denormal()</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="keyword">const</span> <span class="keywordtype">float</span> tt_audio_base::lookup_equalpower[] = {                      <span class="comment">// 512 point equal-power table</span>
<a name="l00014"></a>00014         0.999939F, 0.999908F, 0.999939F, 0.999908F, 0.999908F,
<a name="l00015"></a>00015         0.999847F, 0.999817F, 0.999756F, 0.999664F, 0.999695F, 0.999512F, 0.999481F, 0.999298F, 0.999298F, 0.999146F, 
<a name="l00016"></a>00016         0.998993F, 0.998840F, 0.998779F, 0.998505F, 0.998474F, 0.998169F, 0.998047F, 0.997864F, 0.997650F, 0.997406F, 
<a name="l00017"></a>00017         0.997253F, 0.996918F, 0.996765F, 0.996521F, 0.996155F, 0.996033F, 0.995667F, 0.995331F, 0.995209F, 0.994690F, 
<a name="l00018"></a>00018         0.994568F, 0.994049F, 0.993866F, 0.993500F, 0.993073F, 0.992767F, 0.992371F, 0.992004F, 0.991608F, 0.991241F, 
<a name="l00019"></a>00019         0.990753F, 0.990387F, 0.989960F, 0.989532F, 0.989044F, 0.988617F, 0.988098F, 0.987732F, 0.987183F, 0.986633F, 
<a name="l00020"></a>00020         0.986267F, 0.985565F, 0.985229F, 0.984589F, 0.984131F, 0.983429F, 0.983032F, 0.982391F, 0.981842F, 0.981171F, 
<a name="l00021"></a>00021         0.980713F, 0.980011F, 0.979431F, 0.978729F, 0.978241F, 0.977478F, 0.976868F, 0.976227F, 0.975525F, 0.974823F, 
<a name="l00022"></a>00022         0.974243F, 0.973419F, 0.972809F, 0.972015F, 0.971375F, 0.970551F, 0.969849F, 0.969116F, 0.968323F, 0.967529F, 
<a name="l00023"></a>00023         0.966858F, 0.965912F, 0.965210F, 0.964386F, 0.963562F, 0.962738F, 0.961945F, 0.960999F, 0.960236F, 0.959351F, 
<a name="l00024"></a>00024         0.958466F, 0.957611F, 0.956696F, 0.955811F, 0.954895F, 0.953979F, 0.953064F, 0.952118F, 0.951172F, 0.950226F, 
<a name="l00025"></a>00025         0.949310F, 0.948242F, 0.947357F, 0.946259F, 0.945404F, 0.944305F, 0.943298F, 0.942291F, 0.941223F, 0.940247F, 
<a name="l00026"></a>00026         0.939148F, 0.938080F, 0.937073F, 0.935883F, 0.934937F, 0.933716F, 0.932678F, 0.931549F, 0.930481F, 0.929260F, 
<a name="l00027"></a>00027         0.928162F, 0.927002F, 0.925903F, 0.924683F, 0.923523F, 0.922272F, 0.921234F, 0.919922F, 0.918701F, 0.917542F, 
<a name="l00028"></a>00028         0.916290F, 0.915070F, 0.913788F, 0.912598F, 0.911285F, 0.910034F, 0.908722F, 0.907501F, 0.906189F, 0.904846F, 
<a name="l00029"></a>00029         0.903534F, 0.902222F, 0.900970F, 0.899536F, 0.898193F, 0.896881F, 0.895508F, 0.894165F, 0.892670F, 0.891418F, 
<a name="l00030"></a>00030         0.889923F, 0.888611F, 0.887085F, 0.885773F, 0.884216F, 0.882965F, 0.881287F, 0.880005F, 0.878479F, 0.876984F, 
<a name="l00031"></a>00031         0.875610F, 0.873932F, 0.872589F, 0.871063F, 0.869476F, 0.868011F, 0.866516F, 0.864899F, 0.863373F, 0.861877F, 
<a name="l00032"></a>00032         0.860229F, 0.858765F, 0.857056F, 0.855591F, 0.853912F, 0.852325F, 0.850739F, 0.849091F, 0.847534F, 0.845764F, 
<a name="l00033"></a>00033         0.844238F, 0.842560F, 0.840851F, 0.839264F, 0.837524F, 0.835876F, 0.834167F, 0.832489F, 0.830719F, 0.829132F, 
<a name="l00034"></a>00034         0.827271F, 0.825592F, 0.823883F, 0.822113F, 0.820343F, 0.818634F, 0.816803F, 0.815033F, 0.813324F, 0.811401F, 
<a name="l00035"></a>00035         0.809723F, 0.807861F, 0.806030F, 0.804291F, 0.802338F, 0.800598F, 0.798706F, 0.796844F, 0.795044F, 0.793091F,
<a name="l00036"></a>00036         0.791260F, 0.789398F, 0.787476F, 0.785583F, 0.783661F, 0.781799F, 0.779816F, 0.777954F, 0.775970F, 0.774017F, 
<a name="l00037"></a>00037         0.772156F, 0.770111F, 0.768127F, 0.766266F, 0.764191F, 
<a name="l00038"></a>00038         0.762268F, 0.760193F, 0.758331F, 0.756165F, 0.754242F, 0.752228F, 0.750183F, 0.748108F, 0.746124F, 0.744019F, 
<a name="l00039"></a>00039         0.742035F, 0.739899F, 0.737854F, 0.735779F, 0.733673F, 0.731659F, 0.729431F, 0.727448F, 0.725220F, 0.723206F, 
<a name="l00040"></a>00040         0.721008F, 0.718964F, 0.716644F, 0.714752F, 0.712341F, 0.710358F, 0.708099F, 0.705994F, 0.703766F, 0.701599F, 
<a name="l00041"></a>00041         0.699371F, 0.697235F, 0.694946F, 0.692810F, 0.690552F, 0.688324F, 0.686096F, 0.683868F, 0.681580F, 0.679382F, 
<a name="l00042"></a>00042         0.677155F, 0.674744F, 0.672638F, 0.670258F, 0.668030F, 0.665710F, 0.663422F, 0.661102F, 0.658844F, 0.656494F, 
<a name="l00043"></a>00043         0.654144F, 0.651886F, 0.649445F, 0.647247F, 0.644745F, 0.642517F, 0.640106F, 0.637756F, 0.635315F, 0.633118F, 
<a name="l00044"></a>00044         0.630493F, 0.628326F, 0.625763F, 0.623505F, 0.620941F, 0.618683F, 0.616180F, 0.613770F, 0.611359F, 0.608856F, 
<a name="l00045"></a>00045         0.606537F, 0.603973F, 0.601593F, 0.599121F, 0.596649F, 0.594147F, 0.591766F, 0.589172F, 0.586761F, 0.584229F, 
<a name="l00046"></a>00046         0.581757F, 0.579254F, 0.576721F, 0.574188F, 0.571777F, 0.569092F, 0.566742F, 0.564026F, 0.561615F, 0.558990F, 
<a name="l00047"></a>00047         0.556519F, 0.553925F, 0.551331F, 0.548767F, 0.546295F, 0.543610F, 0.541016F, 0.538544F, 0.535828F, 0.533325F, 
<a name="l00048"></a>00048         0.530640F, 0.528107F, 0.525421F, 0.522858F, 0.520203F, 0.517578F, 0.515015F, 0.512238F, 0.509766F, 0.506927F, 
<a name="l00049"></a>00049         0.504486F, 0.501648F, 0.499115F, 0.496338F, 0.493774F, 0.491028F, 0.488403F, 0.485657F, 0.483032F, 0.480255F, 
<a name="l00050"></a>00050         0.477631F, 0.474915F, 0.472198F, 0.469482F, 0.466705F, 0.464142F, 0.461243F, 0.458649F, 0.455811F, 0.453156F, 
<a name="l00051"></a>00051         0.450378F, 0.447632F, 0.444824F, 0.442169F, 0.439423F, 0.436493F, 0.433899F, 0.431061F, 0.428253F, 0.425568F, 
<a name="l00052"></a>00052         0.422668F, 0.419952F, 0.417145F, 0.414368F, 0.411499F, 0.408813F, 0.405853F, 0.403229F, 0.400208F, 0.397552F, 
<a name="l00053"></a>00053         0.394653F, 0.391876F, 0.388977F, 0.386200F, 0.383331F, 0.380554F, 0.377625F, 0.374786F, 0.372009F, 0.369080F, 
<a name="l00054"></a>00054         0.366241F, 0.363403F, 0.360504F, 0.357697F, 0.354706F, 0.351929F, 0.349030F, 0.346191F, 0.343170F, 0.340424F, 
<a name="l00055"></a>00055         0.337463F, 0.334595F, 0.331696F, 0.328766F, 0.325897F, 0.322968F, 0.320038F, 0.317230F, 0.314117F, 0.311401F, 
<a name="l00056"></a>00056         0.308350F, 0.305511F, 0.302490F, 0.299622F, 0.296661F, 0.293732F, 0.290802F, 0.287872F, 0.284882F, 0.281952F, 
<a name="l00057"></a>00057         0.279022F, 0.276031F, 0.273163F, 0.270050F, 0.267242F, 0.264160F, 0.261292F, 0.258301F, 0.255280F, 0.252319F, 
<a name="l00058"></a>00058         0.249420F, 0.246368F, 0.243347F, 0.240509F, 0.237396F, 0.234436F, 0.231476F, 0.228485F, 0.225464F, 0.222443F, 
<a name="l00059"></a>00059         0.219513F, 0.216461F, 0.213531F, 0.210419F, 0.207489F, 0.204437F, 0.201477F, 0.198456F, 0.195404F, 0.192413F, 
<a name="l00060"></a>00060         0.189423F, 0.186340F, 0.183411F, 0.180267F, 0.177338F, 0.174316F, 0.171204F, 0.168213F, 0.165253F, 0.16214F, 
<a name="l00061"></a>00061         0.159088F, 0.156158F, 0.153015F, 0.149994F, 0.147003F, 0.143951F, 0.1409F, 0.137787F, 0.134857F, 0.131714F, 
<a name="l00062"></a>00062         0.128754F, 0.125641F, 0.122589F, 0.119568F, 0.116547F, 0.113373F, 0.110443F, 0.10733F, 0.10434F, 0.101166F, 
<a name="l00063"></a>00063         0.098175F, 0.095154F, 0.09201F, 0.08902F, 0.085907F, 0.082855F, 0.079865F, 0.07666F, 0.07373F, 0.070557F, 
<a name="l00064"></a>00064         0.067596F, 0.064392F, 0.061493F, 0.058319F, 0.055237F, 0.052216F, 0.049164F, 0.04599F, 0.04306F, 0.039856F, 
<a name="l00065"></a>00065         0.036896F, 0.033752F, 0.030701F, 0.027618F, 0.024567F, 0.021484F, 0.018402F, 0.01532F, 0.012268F,0.009216F, 
<a name="l00066"></a>00066         0.006042F, 0.0F};       
<a name="l00067"></a>00067 
<a name="l00068"></a>00068 <span class="keyword">const</span> <span class="keywordtype">float</span> tt_audio_base::lookup_half_paddedwelch[] = {                <span class="comment">// 256 point window table</span>
<a name="l00069"></a>00069         0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F,       0.000000F, 0.000000F, 0.000000F, 0.000000F,
<a name="l00070"></a>00070         0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.006989F, 0.014008F, 0.021027F,
<a name="l00071"></a>00071         0.028046F, 0.035034F, 0.042053F, 0.049042F, 0.056061F, 0.063049F, 0.070038F, 0.077057F, 0.084045F, 0.091034F,
<a name="l00072"></a>00072         0.097992F, 0.104980F, 0.111938F, 0.118927F, 0.125885F, 0.132812F, 0.139771F, 0.146698F, 0.153656F, 0.160583F,
<a name="l00073"></a>00073         0.167480F, 0.174408F, 0.181305F, 0.188202F, 0.195068F, 0.201935F, 0.208801F, 0.215668F, 0.222504F, 0.229340F,
<a name="l00074"></a>00074         0.236145F, 0.242950F, 0.249756F, 0.256531F, 0.263306F, 0.270081F, 0.276825F, 0.283539F, 0.290253F, 0.296967F,
<a name="l00075"></a>00075         0.303650F, 0.310333F, 0.316986F, 0.323639F, 0.330261F, 0.336853F, 0.343445F, 0.350037F, 0.356598F, 0.363129F,
<a name="l00076"></a>00076         0.369659F, 0.376160F, 0.382660F, 0.389130F, 0.395569F, 0.402008F, 0.408417F, 0.414795F, 0.421173F, 0.427521F,
<a name="l00077"></a>00077         0.433868F, 0.440155F, 0.446442F, 0.452698F, 0.458954F, 0.465179F, 0.471375F, 0.477539F, 0.483704F, 0.489807F,
<a name="l00078"></a>00078         0.495911F, 0.501984F, 0.508057F, 0.514069F, 0.520081F, 0.526062F, 0.532013F, 0.537933F, 0.543823F, 0.549683F,
<a name="l00079"></a>00079         0.555542F, 0.561340F, 0.567139F, 0.572906F, 0.578644F, 0.584351F, 0.590027F, 0.595673F, 0.601288F, 0.606873F,
<a name="l00080"></a>00080         0.612427F, 0.617950F, 0.623444F, 0.628937F, 0.634369F, 0.639771F, 0.645142F, 0.650482F, 0.655792F, 0.661072F,
<a name="l00081"></a>00081         0.666321F, 0.671509F, 0.676697F, 0.681854F, 0.686951F, 0.692047F, 0.697083F, 0.702087F, 0.707062F, 0.712006F,
<a name="l00082"></a>00082         0.716919F, 0.721802F, 0.726624F, 0.731415F, 0.736176F, 0.740906F, 0.745605F, 0.750244F, 0.754883F, 0.759460F,
<a name="l00083"></a>00083         0.764008F, 0.768494F, 0.772980F, 0.777405F, 0.781799F, 0.786133F, 0.790466F, 0.794739F, 0.798981F, 0.803162F,
<a name="l00084"></a>00084         0.807312F, 0.811432F, 0.815521F, 0.819550F, 0.823547F, 0.827515F, 0.831421F, 0.835297F, 0.839142F, 0.842926F,
<a name="l00085"></a>00085         0.846680F, 0.850403F, 0.854065F, 0.857697F, 0.861267F, 0.864807F, 0.868317F, 0.871765F, 0.875183F, 0.878540F,
<a name="l00086"></a>00086         0.881866F, 0.885162F, 0.888397F, 0.891602F, 0.894745F, 0.897858F, 0.900940F, 0.903961F, 0.906921F, 0.909851F,
<a name="l00087"></a>00087         0.912750F, 0.915588F, 0.918365F, 0.921143F, 0.923828F, 0.926483F, 0.929108F, 0.931671F, 0.934204F, 0.936676F,
<a name="l00088"></a>00088         0.939117F, 0.941498F, 0.943848F, 0.946136F, 0.948364F, 0.950592F, 0.952728F, 0.954834F, 0.956909F, 0.958893F,
<a name="l00089"></a>00089         0.960876F, 0.962799F, 0.964661F, 0.966492F, 0.968262F, 0.970001F, 0.971680F, 0.973297F, 0.974884F, 0.976410F,
<a name="l00090"></a>00090         0.977905F, 0.979340F, 0.980743F, 0.982086F, 0.983368F, 0.984619F, 0.985840F, 0.986969F, 0.988068F, 0.989136F,
<a name="l00091"></a>00091         0.990143F, 0.991089F, 0.992004F, 0.992859F, 0.993652F, 0.994415F, 0.995148F, 0.995789F, 0.996429F, 0.996979F,
<a name="l00092"></a>00092         0.997498F, 0.997955F, 0.998383F, 0.998749F, 0.999084F, 0.999329F, 0.999573F, 0.999725F, 0.999847F, 0.999939F,
<a name="l00093"></a>00093         0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F,
<a name="l00094"></a>00094         0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F
<a name="l00095"></a>00095 };
<a name="l00096"></a>00096         
<a name="l00097"></a>00097 <span class="keyword">const</span> <span class="keywordtype">float</span> tt_audio_base::lookup_quartersine[] = {             <span class="comment">// 128 point quarter sine wave table</span>
<a name="l00098"></a>00098         0.000000F, 0.012272F, 0.024541F, 0.036807F, 0.049068F, 0.061321F, 0.073565F, 0.085797F, 
<a name="l00099"></a>00099         0.098017F, 0.110222F, 0.122411F, 0.134581F, 0.146730F, 0.158858F, 0.170962F, 0.183040F, 
<a name="l00100"></a>00100         0.195090F, 0.207111F, 0.219101F, 0.231058F, 0.242980F, 0.254866F, 0.266713F, 0.278520F, 
<a name="l00101"></a>00101         0.290285F, 0.302006F, 0.313682F, 0.325310F, 0.336890F, 0.348419F, 0.359895F, 0.371317F, 
<a name="l00102"></a>00102         0.382683F, 0.393992F, 0.405241F, 0.416430F, 0.427555F, 0.438616F, 0.449611F, 0.460539F, 
<a name="l00103"></a>00103         0.471397F, 0.482184F, 0.492898F, 0.503538F, 0.514103F, 0.524590F, 0.534998F, 0.545325F, 
<a name="l00104"></a>00104         0.555570F, 0.565732F, 0.575808F, 0.585798F, 0.595699F, 0.605511F, 0.615232F, 0.624859F, 
<a name="l00105"></a>00105         0.634393F, 0.643832F, 0.653173F, 0.662416F, 0.671559F, 0.680601F, 0.689541F, 0.698376F, 
<a name="l00106"></a>00106         0.707107F, 0.715731F, 0.724247F, 0.732654F, 0.740951F, 0.749136F, 0.757209F, 0.765167F, 
<a name="l00107"></a>00107         0.773010F, 0.780737F, 0.788346F, 0.795837F, 0.803208F, 0.810457F, 0.817585F, 0.824589F, 
<a name="l00108"></a>00108         0.831470F, 0.838225F, 0.844854F, 0.851355F, 0.857729F, 0.863973F, 0.870087F, 0.876070F, 
<a name="l00109"></a>00109         0.881921F, 0.887640F, 0.893224F, 0.898674F, 0.903989F, 0.909168F, 0.914210F, 0.919114F, 
<a name="l00110"></a>00110         0.923880F, 0.928506F, 0.932993F, 0.937339F, 0.941544F, 0.945607F, 0.949528F, 0.953306F, 
<a name="l00111"></a>00111         0.956940F, 0.960431F, 0.963776F, 0.966976F, 0.970031F, 0.972940F, 0.975702F, 0.978317F, 
<a name="l00112"></a>00112         0.980785F, 0.983105F, 0.985278F, 0.987301F, 0.989177F, 0.990903F, 0.992480F, 0.993907F, 
<a name="l00113"></a>00113         0.995185F, 0.996313F, 0.997290F, 0.998118F, 0.998795F, 0.999322F, 0.999699F, 0.999925F 
<a name="l00114"></a>00114 }; 
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">// CLASS IMPLEMENTATION</span>
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="comment">// Constructor for this base class: do initialization, etc.</span>
<a name="l00124"></a>00124 tt_audio_base::tt_audio_base(<span class="keywordtype">void</span>)
<a name="l00125"></a>00125 {
<a name="l00126"></a>00126         set_sr(global_sr);                                              <span class="comment">// Init the local sr to the global sr</span>
<a name="l00127"></a>00127         set_vectorsize(global_vectorsize);              <span class="comment">// Init the local vs to the global vs</span>
<a name="l00128"></a>00128         init();
<a name="l00129"></a>00129 }
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="keywordtype">void</span> tt_audio_base::init()
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133         is_initialized = <span class="keyword">true</span>;                                  <span class="comment">// Set the indicator flag</span>
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">// DESTRUCTOR</span>
<a name="l00138"></a>00138 tt_audio_base::~tt_audio_base()
<a name="l00139"></a>00139 {
<a name="l00140"></a>00140         ;
<a name="l00141"></a>00141 }
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="comment">// ATTRIBUTE: global sample rate</span>
<a name="l00146"></a>00146 <span class="keywordtype">void</span> tt_audio_base::set_global_sr(<span class="keywordtype">int</span> value)
<a name="l00147"></a>00147 {
<a name="l00148"></a>00148         global_sr = value;
<a name="l00149"></a>00149 }
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="keywordtype">int</span> tt_audio_base::get_global_sr()
<a name="l00152"></a>00152 {
<a name="l00153"></a>00153         <span class="keywordflow">return</span> global_sr;
<a name="l00154"></a>00154 }
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 <span class="comment">// ATTRIBUTE: local sample rate (intended for use by inherited objects)</span>
<a name="l00158"></a>00158 <span class="keywordtype">void</span> tt_audio_base::set_sr(<span class="keywordtype">int</span> value)
<a name="l00159"></a>00159 {
<a name="l00160"></a>00160         sr = value;
<a name="l00161"></a>00161         r_sr = 1.0 / value;
<a name="l00162"></a>00162         m_sr = sr * 0.001;
<a name="l00163"></a>00163 }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="keywordtype">int</span> tt_audio_base::get_sr()
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167         <span class="keywordflow">return</span> sr;
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="comment">// ATTRIBUTE: global vector size</span>
<a name="l00174"></a>00174 <span class="keywordtype">void</span> tt_audio_base::set_global_vectorsize(<span class="keywordtype">int</span> value)
<a name="l00175"></a>00175 {
<a name="l00176"></a>00176         global_vectorsize = value;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="keywordtype">int</span> tt_audio_base::get_global_vectorsize()
<a name="l00180"></a>00180 {
<a name="l00181"></a>00181         <span class="keywordflow">return</span> global_vectorsize;
<a name="l00182"></a>00182 }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 <span class="comment">// ATTRIBUTE: local vector size (intended for use by inherited objects)</span>
<a name="l00186"></a>00186 <span class="keywordtype">void</span> tt_audio_base::set_vectorsize(<span class="keywordtype">int</span> value)
<a name="l00187"></a>00187 {
<a name="l00188"></a>00188         vectorsize = value;
<a name="l00189"></a>00189 }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="keywordtype">int</span> tt_audio_base::get_vectorsize()
<a name="l00192"></a>00192 {
<a name="l00193"></a>00193         <span class="keywordflow">return</span> vectorsize;
<a name="l00194"></a>00194 }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 <span class="comment">// Platform independent message logging</span>
<a name="l00199"></a>00199 <span class="keywordtype">void</span> tt_audio_base::log_post(<span class="keywordtype">char</span> *message)
<a name="l00200"></a>00200 {
<a name="l00201"></a>00201         <span class="comment">// Cycling '74 Max</span>
<a name="l00202"></a>00202 <span class="preprocessor">        #if defined(MAC_VERSION) or defined(WIN_VERSION)</span>
<a name="l00203"></a>00203 <span class="preprocessor"></span>                post(message);
<a name="l00204"></a>00204                 
<a name="l00205"></a>00205         <span class="comment">// Generic C++</span>
<a name="l00206"></a>00206 <span class="preprocessor">        #else</span>
<a name="l00207"></a>00207 <span class="preprocessor"></span>                std::cout &lt;&lt; message &lt;&lt; std::endl;
<a name="l00208"></a>00208 <span class="preprocessor">        #endif</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>}
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keywordtype">void</span> tt_audio_base::log_error(<span class="keywordtype">char</span> *message)
<a name="l00212"></a>00212 {
<a name="l00213"></a>00213         <span class="comment">// Cycling '74 Max</span>
<a name="l00214"></a>00214 <span class="preprocessor">        #if defined(MAC_VERSION) or defined(WIN_VERSION)</span>
<a name="l00215"></a>00215 <span class="preprocessor"></span>                error(message);
<a name="l00216"></a>00216                 
<a name="l00217"></a>00217         <span class="comment">// Generic C++</span>
<a name="l00218"></a>00218 <span class="preprocessor">        #else</span>
<a name="l00219"></a>00219 <span class="preprocessor"></span>                std::cerr &lt;&lt; message &lt;&lt; std::endl;
<a name="l00220"></a>00220 <span class="preprocessor">        #endif</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>}
<a name="l00222"></a>00222 
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 <span class="comment">// Platform independent (cleared) memory allocation</span>
<a name="l00227"></a>00227 tt_ptr tt_audio_base::mem_alloc(<span class="keywordtype">long</span> size)
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229         tt_ptr alloc;
<a name="l00230"></a>00230         
<a name="l00231"></a>00231         <span class="comment">// Cycling '74 Max</span>
<a name="l00232"></a>00232 <span class="preprocessor">        #if defined(MAC_VERSION) or defined(WIN_VERSION)</span>
<a name="l00233"></a>00233 <span class="preprocessor"></span>                alloc = (tt_ptr)sysmem_newptrclear(size);
<a name="l00234"></a>00234                 <span class="keywordflow">if</span>(alloc){
<a name="l00235"></a>00235                         <span class="keywordflow">return</span> alloc;
<a name="l00236"></a>00236                 }
<a name="l00237"></a>00237                 <span class="keywordflow">else</span>{
<a name="l00238"></a>00238                         error(<span class="stringliteral">"tt_audio_base::mem_alloc - could not get memory"</span>);
<a name="l00239"></a>00239                         <span class="keywordflow">return</span> 0;
<a name="l00240"></a>00240                 }
<a name="l00241"></a>00241                 
<a name="l00242"></a>00242         <span class="comment">// Generic Mac </span>
<a name="l00243"></a>00243 <span class="preprocessor">        #elif defined(TAPTOOLS_TARGET_MAC)</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span>                alloc = (tt_ptr)NewPtrClear(size);
<a name="l00245"></a>00245                 <span class="keywordflow">if</span>(alloc)
<a name="l00246"></a>00246                         <span class="keywordflow">return</span> alloc;
<a name="l00247"></a>00247                 <span class="keywordflow">else</span>{
<a name="l00248"></a>00248                         <span class="comment">//error("tt_audio_base::mem_alloc - could not get memory");</span>
<a name="l00249"></a>00249                         <span class="keywordflow">return</span> 0;
<a name="l00250"></a>00250                 }       
<a name="l00251"></a>00251         
<a name="l00252"></a>00252         <span class="comment">// Generic Win</span>
<a name="l00253"></a>00253 <span class="preprocessor">        #elif defined(TAPTOOLS_TARGET_WIN)</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span>                <span class="comment">//alloc = HeapAlloc(GetProcessHeap(), 0, size);                 // Windows API</span>
<a name="l00255"></a>00255                 alloc = (tt_ptr)calloc(1, size);
<a name="l00256"></a>00256                 <span class="comment">// Should add some error checking here</span>
<a name="l00257"></a>00257                 <span class="keywordflow">return</span> alloc;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         <span class="comment">// Not Defined</span>
<a name="l00260"></a>00260 <span class="preprocessor">        #else                                                           </span>
<a name="l00261"></a>00261 <span class="preprocessor"></span><span class="preprocessor">                #error VALID TARGET NOT DEFINED!</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span><span class="preprocessor">        #endif</span>
<a name="l00263"></a>00263 <span class="preprocessor"></span>}
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <span class="comment">// Platform independent memory de-allocation</span>
<a name="l00267"></a>00267 <span class="keywordtype">void</span> tt_audio_base::mem_free(<span class="keywordtype">void</span> *my_ptr)
<a name="l00268"></a>00268 {
<a name="l00269"></a>00269         <span class="keywordflow">if</span>(my_ptr != 0){ 
<a name="l00270"></a>00270                 <span class="comment">// Cycling '74 Max</span>
<a name="l00271"></a>00271 <span class="preprocessor">                #if defined(MAC_VERSION) or defined(WIN_VERSION)</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>                        sysmem_freeptr(my_ptr);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274                 <span class="comment">// Generic Mac </span>
<a name="l00275"></a>00275 <span class="preprocessor">                #elif defined(TAPTOOLS_TARGET_MAC)</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span>                        DisposePtr((Ptr)my_ptr);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278                 <span class="comment">// Generic Win</span>
<a name="l00279"></a>00279 <span class="preprocessor">                #elif defined(TAPTOOLS_TARGET_WIN)</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span>                        <span class="comment">//HeapFree(GetProcessHeap(), 0, my_ptr)</span>
<a name="l00281"></a>00281                         free(my_ptr);
<a name="l00282"></a>00282 <span class="preprocessor">                #endif</span>
<a name="l00283"></a>00283 <span class="preprocessor"></span>
<a name="l00284"></a>00284                 my_ptr = 0;
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286 }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Apr 24 11:09:38 2008 for Jamoma by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
